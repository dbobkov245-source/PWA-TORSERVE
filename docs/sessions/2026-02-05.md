# –°–µ—Å—Å–∏—è 05.02.2026: TMDB Bypass Optimization

## –¶–µ–ª—å
–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–≥—Ä–µ—Å—Å–∏—é ADR-004 –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å bypass —Å–∏—Å—Ç–µ–º—É.

## –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### –§–∏–∫—Å —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
- Race Timeout —É–≤–µ–ª–∏—á–µ–Ω —Å 1500–º—Å –¥–æ 4000–º—Å
- URL —Ñ–æ—Ä–º–∞—Ç—ã –≤ —Ç–µ—Å—Ç–∞—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã (Lampa/Worker)
- Kinopoisk –ø–æ–ª—É—á–∏–ª X-API-KEY –∑–∞–≥–æ–ª–æ–≤–æ–∫

### 5 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
1. **Dynamic Race Timeout** ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ (`getDynamicRaceTimeout()`)
2. **Parallel Phase 2** ‚Äî Server Proxy + Capacitor –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
3. **Prefetch Discovery** ‚Äî –ø—Ä–æ–≥—Ä–µ–≤ –∫—ç—à–∞ —á–µ—Ä–µ–∑ 5—Å –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
4. **Image Mirror Warmup** ‚Äî —Ç–µ—Å—Ç –∑–µ—Ä–∫–∞–ª –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
5. **UI —Å—Ç–∞—Ç—É—Å bypass** ‚Äî –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤ Settings ‚Üí –°—Ç–∞—Ç—É—Å

## –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ **6/6 —Å–ª–æ—ë–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ VPN:**
- worker üü¢
- lampa üü¢
- server_proxy üü¢
- capacitor üü¢
- corsproxy üü¢
- kinopoisk üü¢

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `client/src/utils/tmdbClient.js`
- `client/src/components/HomePanel.jsx`
- `client/src/components/SettingsPanel.jsx`

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (05.02.2026) ‚Äî –ú–∏–Ω–∏-—Ñ–∏–∫—Å—ã —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
- **Image Mirror Warmup:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `timeoutSignal()` fallback –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ `AbortSignal.timeout()`
- **PWA Status Polling:** –ø—Ä–∏ –ø—É—Å—Ç–æ–º `serverUrl` (–Ω–µ native) fallback –Ω–∞ `window.location.origin`

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `client/src/utils/tmdbClient.js`
- `client/src/App.jsx`

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (05.02.2026) ‚Äî –ù–µ—É–¥–∞—á–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞: –≥–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–∏—Å–∫ (–æ—Ç–∫–∞—Ç)

### –ß—Ç–æ –ø—Ä–æ–±–æ–≤–∞–ª–∏
- –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏/—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π/—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- Fallback —è–∑—ã–∫–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `ru-RU`
- –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è + –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π `stop()` –¥–ª—è —Å–±—Ä–æ—Å–∞ –∑–∞–≤–∏—Å—à–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –ò—Ç–æ–≥
- **TCL:** –∫–Ω–æ–ø–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ ¬´–∑–∞–≤–∏—Å–∞–µ—Ç¬ª –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- **Sony XH9505:** –≥–æ–ª–æ—Å —É—Ö–æ–¥–∏—Ç –≤ —Å–∏—Å—Ç–µ–º–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É, –ø–æ–∏—Å–∫ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ò–∑–º–µ–Ω–µ–Ω–∏—è **–æ—Ç–∫–∞—Ç–∏–ª–∏**, –≤–µ—Ä–Ω—É–ª–∏—Å—å –∫ –±–∞–∑–æ–≤–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é

### –§–∞–π–ª—ã (–æ—Ç–∫–∞—Ç)
- `client/src/components/HomePanel.jsx`
