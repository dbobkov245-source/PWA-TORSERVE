# üõ° –ê–Ω–∞–ª–∏–∑ –º–µ—Ç–æ–¥–æ–≤ –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ TMDB: Reverse Engineering –æ—Ç—á–µ—Ç

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–±–æ–±—â–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Lampa, Vokino, NUM) –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ TMDB –≤ —É—Å–ª–æ–≤–∏—è—Ö —Å–µ—Ç–µ–≤–æ–π —Ü–µ–Ω–∑—É—Ä—ã (–†–ö–ù, DPI, SNI/IP Blocking).

## 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç: –ü–æ—á–µ–º—É –±–ª–æ–∫–∏—Ä—É—é—Ç?
*   **–¶–µ–ª—å:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞—Ç–∞–ª–æ–≥–∞–º "–ø–∏—Ä–∞—Ç—Å–∫–æ–≥–æ" –∫–æ–Ω—Ç–µ–Ω—Ç–∞.
*   **–ú–µ—Ç–æ–¥:** –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ–º–µ–Ω–æ–≤ `api.themoviedb.org` –∏ `image.tmdb.org` –ø–æ SNI (Server Name Indication) –∏ IP-–∞–¥—Ä–µ—Å–∞–º CDN (Cloudflare/Fastly).
*   **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä—è–º–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ª–æ–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ–º–∞—à–Ω–∏—Ö –º–µ–¥–∏–∞-—Ü–µ–Ω—Ç—Ä–æ–≤.

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è (–ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º)

### 2.1. Lampa ("–¢–æ–Ω–∫–∏–π –ö–ª–∏–µ–Ω—Ç" / JS-Injection)
*   **–§–∏–ª–æ—Å–æ—Ñ–∏—è:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –±—Ä–∞—É–∑–µ—Ä (WebView), –ª–æ–≥–∏–∫–∞ ‚Äî —ç—Ç–æ JS, –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏.
*   **CUB Mirror Network:**
    *   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç—å Nginx-–ø—Ä–æ–∫—Å–∏ (`cub.red`, `cub.watch`), —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã—Ö –≤ "—Å–≤–æ–±–æ–¥–Ω—ã—Ö" —é—Ä–∏—Å–¥–∏–∫—Ü–∏—è—Ö (–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã).
    *   **Anti-DPI:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SSL Termination —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ Let's Encrypt –¥–ª—è –¥–æ–º–µ–Ω–æ–≤, –Ω–µ –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ.
    *   **Rate Limiting Bypass:** –°–µ—Ä–≤–µ—Ä CUB —Ä–æ—Ç–∏—Ä—É–µ—Ç –ø—É–ª API-–∫–ª—é—á–µ–π TMDB, —á—Ç–æ–±—ã –Ω–µ —É–ø–µ—Ä–µ—Ç—å—Å—è –≤ –ª–∏–º–∏—Ç—ã –æ–¥–Ω–æ–≥–æ –∫–ª—é—á–∞.
*   **Image Optimization (wsrv.nl):**
    *   –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ "–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –ª–µ—Ç—É".
    *   –ö–ª–∏–µ–Ω—Ç -> `wsrv.nl` (–ª–µ–≥–∏—Ç–∏–º–Ω—ã–π CDN) -> `tmdb.org` (–±—ç–∫–µ–Ω–¥).
    *   –¢—Ä–∞—Ñ–∏–∫ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –∑–∞–≥—Ä—É–∑–∫–∞ –ª–µ–≥–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å CDN.
*   **Plugins:** JS-–ø–ª–∞–≥–∏–Ω—ã –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤—É –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –º–µ–Ω—è—Ç—å –∞–¥—Ä–µ—Å–∞ –∑–µ—Ä–∫–∞–ª –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è APK.

### 2.2. Vokino (–ù–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ / BFF)
*   **–°—Ç–µ–∫:** Kotlin + OkHttp.
*   **BFF (Backend for Frontend):** –ö–ª–∏–µ–Ω—Ç —Ö–æ–¥–∏—Ç –Ω–µ –≤ TMDB, –∞ –Ω–∞ —Å–≤–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä `api.vokino.tv`. –°–µ—Ä–≤–µ—Ä –∫–µ—à–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã TMDB –∏ –æ–±–æ–≥–∞—â–∞–µ—Ç –∏—Ö (–ö–∏–Ω–æ–ø–æ–∏—Å–∫, IMDb).
*   **DDoS Protection & DNS:**
    *   **DoH (DNS over HTTPS):** –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Cloudflare DNS (`1.1.1.1`) –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç DNS-–∑–∞–ø—Ä–æ—Å—ã –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
    *   **Remote Config:** –ê–¥—Ä–µ—Å–∞ API –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø—Ä–∏–ª–µ—Ç–∞—é—Ç –∏–∑ Firebase. –ï—Å–ª–∏ –æ–¥–∏–Ω –¥–æ–º–µ–Ω –±–∞–Ω—è—Ç, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–µ–Ω—è—é—Ç –∫–æ–Ω—Ñ–∏–≥, –∏ –∫–ª–∏–µ–Ω—Ç—ã "–ø–µ—Ä–µ–µ–∑–∂–∞—é—Ç" –Ω–∞ –∑–µ—Ä–∫–∞–ª–æ.
*   **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞:** "Control Plane" (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ) –∏–¥–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏, "Data Plane" (—Ç–æ—Ä—Ä–µ–Ω—Ç—ã) ‚Äî –Ω–∞–ø—Ä—è–º—É—é P2P.

### 2.3. NUM (Tor & Scraping)
*   **Onion Routing:** –í—à–∏—Ç–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `libtor.so` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≤–µ—Ä–Ω—É—Ç—å API-–∑–∞–ø—Ä–æ—Å—ã –≤ —Å–µ—Ç—å Tor –≤ —Å–ª—É—á–∞–µ —Ç–æ—Ç–∞–ª—å–Ω–æ–≥–æ —à–∞—Ç–¥–∞—É–Ω–∞.
*   **Web Scraping Fallback:** –ï—Å–ª–∏ API –º–µ—Ä—Ç–≤–æ, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞—Ä—Å–∏—Ç HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–∞–π—Ç–æ–≤-–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–æ–≤ (Rezka, Kinopoisk), –∏—Å–ø–æ–ª—å–∑—É—è CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä—ã. –≠—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –¥–ª—è DPI –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –≤–µ–±-—Å–µ—Ä—Ñ–∏–Ω–≥.

---

## 3. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –æ–±—Ö–æ–¥–∞ DPI (Deep Packet Inspection)

### 3.1. ClientHello Fragmentation
*   **–°—É—Ç—å:** –†–∞–∑–±–∏–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ TCP-–ø–∞–∫–µ—Ç–∞ (TLS ClientHello) –Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã.
*   **–≠—Ñ—Ñ–µ–∫—Ç:** –î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è (SNI) –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "—Ä–∞–∑—Ä–µ–∑–∞–Ω–æ" –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏. DPI, –Ω–µ —É–º–µ—é—â–∏–π —Å–æ–±–∏—Ä–∞—Ç—å —Å–µ—Å—Å–∏–∏ (Stateful Reassembly) –Ω–∞ –ª–µ—Ç—É, –Ω–µ –≤–∏–¥–∏—Ç –∑–∞–ø—Ä–µ—â–µ–Ω–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ –∏ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø–∞–∫–µ—Ç—ã. –°–µ—Ä–≤–µ—Ä –∂–µ —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### 3.2. ECH (Encrypted Client Hello)
*   **–°—É—Ç—å:** –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ SNI –∫–ª—é—á–æ–º, –ø–æ–ª—É—á–µ–Ω–Ω—ã–º —á–µ—Ä–µ–∑ DNS.
*   **–°—Ç–∞—Ç—É—Å:** "–°–µ—Ä–µ–±—Ä—è–Ω–∞—è –ø—É–ª—è". –ï—Å–ª–∏ TMDB –≤–Ω–µ–¥—Ä–∏—Ç ECH + Cloudflare, —Ç–æ—á–µ—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ç–∞–Ω–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤—Å–µ–≥–æ Cloudflare –ø–æ IP.

### 3.3. QUIC (HTTP/3)
*   **–°—É—Ç—å:** –†–∞–±–æ—Ç–∞ –ø–æ–≤–µ—Ä—Ö UDP.
*   **–≠—Ñ—Ñ–µ–∫—Ç:** –ú–Ω–æ–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã DPI –ø–ª–æ—Ö–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç UDP –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–∞ TCP-—Å–±—Ä–æ—Å—ã.

---

## 4. –í—ã–≤–æ–¥—ã –¥–ª—è PWA-TorServe

1.  **–ù–∞—à–µ —Ç–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (Offline Mode + Gradients)** ‚Äî —ç—Ç–æ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ "–ø–æ—Ä–∞–∂–µ–Ω–∏—è" –≤ –ø—Ä—è–º–æ–π –±–∏—Ç–≤–µ, –Ω–æ –ø–æ–±–µ–¥–∞ –≤ UX. –ú—ã —É—à–ª–∏ —Å –ø–æ–ª—è –±–æ—è.
2.  **–ü—É—Ç—å —Ä–∞–∑–≤–∏—Ç–∏—è:** –ß—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å –ø–æ—Å—Ç–µ—Ä—ã, –Ω–∞–º –Ω–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ `fetch`. –ù–∞–º –Ω—É–∂–Ω–æ:
    *   –õ–∏–±–æ **BFF** (—Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä –≤ –ï–≤—Ä–æ–ø–µ + –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ).
    *   –õ–∏–±–æ **Client-Side Proxy** (wsrv.nl), –Ω–æ –Ω—É–∂–Ω–æ –±—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º –∫ –∫–∞–ø—á–∞–º.
    *   –õ–∏–±–æ **VPN –Ω–∞ —É—Ä–æ–≤–Ω–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** (—Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –¥–æ–º–∞).

*–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –ê–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω Antigravity.*
