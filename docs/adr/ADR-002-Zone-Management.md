# üö® ARCHITECTURE DECISION RECORD: Zone Management (DO NOT TOUCH)

> **–§–∞–π–ª:** `App.jsx`, —Å—Ç—Ä–æ–∫–∏ 163-175  
> **–î–∞—Ç–∞ —Ñ–∏–∫—Å–∞—Ü–∏–∏:** 01.02.2026  
> **–°—Ç–∞—Ç—É—Å:** üîí FROZEN ‚Äî –ù–ï –¢–†–û–ì–ê–¢–¨ –ë–ï–ó –ö–†–ê–ô–ù–ï–ô –ù–ï–û–ë–•–û–î–ò–ú–û–°–¢–ò

### üìú –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ

Zone Management ‚Äî —ç—Ç–æ useEffect, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—É—é –∑–æ–Ω—É –¥–ª—è Spatial Navigation (TV –ø—É–ª—å—Ç).

```javascript
useEffect(() => {
  if (showSettings) setActiveZone('settings')
  else if (selectedTorrent) setActiveZone('modal')
  else if (showSearch) setActiveZone('search')
  else if (showAutoDownload) setActiveZone('auto-download')
  else if (showSidebar) setActiveZone('sidebar')
  // ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: Home-specific zones –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞ HomePanel visible
  else if (activeView === 'home' && activeMovie) setActiveZone('detail')
  else if (activeView === 'home' && activePerson) setActiveZone('person')
  else if (activeView === 'home' && activeCategory) setActiveZone('category')
  else setActiveZone('main')
}, [/* dependencies */])
```

### üî• –ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞ (BUG-FREEZE), –∫–æ—Ç–æ—Ä—É—é –º—ã —Ä–µ—à–∞–ª–∏ 3 –¥–Ω—è:**

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç HomePanel ‚Üí –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ —Ñ–∏–ª—å–º ‚Üí `activeMovie` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è truthy
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ "–ú–æ–π —Å–ø–∏—Å–æ–∫" (activeView = 'list')
3. HomePanel —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, **–ù–û `activeMovie` –æ—Å—Ç–∞—ë—Ç—Å—è truthy** (React state –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
4. Zone useEffect —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç ‚Üí –≤–∏–¥–∏—Ç `activeMovie` truthy ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `setActiveZone('detail')`
5. Spatial Navigation –∏—â–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –∑–æ–Ω–µ 'detail', –Ω–æ –∏—Ö **0** (HomePanel –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è!)
6. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–∞–≤–∏–≥–∞—Ü–∏—è –∑–∞–≤–∏—Å–∞–µ—Ç, –ø—É–ª—å—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–∏—Ç—å **`activeView === 'home'`** –∫–∞–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ –¥–ª—è home-—Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –∑–æ–Ω:

```diff
- else if (activeMovie) setActiveZone('detail')
+ else if (activeView === 'home' && activeMovie) setActiveZone('detail')
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∑–æ–Ω—ã `detail`, `person`, `category` –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ HomePanel —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è**.

### ‚õî –ü–æ—á–µ–º—É –ù–ï –ù–ê–î–û —Ç—Ä–æ–≥–∞—Ç—å —ç—Ç–æ –º–µ—Å—Ç–æ

1. **–≠—Ç–æ –ï–î–ò–ù–°–¢–í–ï–ù–ù–û–ï –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è zone management.** –ü–µ—Ä–µ–Ω–æ—Å –ª–æ–≥–∏–∫–∏ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (HomePanel, TorrentModal) –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ race conditions –∏ –ø–æ—Ç–µ—Ä–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

2. **–ü–æ—Ä—è–¥–æ–∫ —É—Å–ª–æ–≤–∏–π –∫—Ä–∏—Ç–∏—á–µ–Ω.** –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (settings, modal, search) –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –ü–ï–†–í–´–ú–ò, —á—Ç–æ–±—ã –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —Ñ–æ–∫—É—Å. –ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫.

3. **Dependencies array –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω—ã–º.** –ï—Å–ª–∏ —É–±—Ä–∞—Ç—å `activeView` –∏–∑ dependencies, —ç—Ñ—Ñ–µ–∫—Ç –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫.

4. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã —Ö—É–∂–µ:**
   - ‚ùå –°–±—Ä–∞—Å—ã–≤–∞—Ç—å `activeMovie` –ø—Ä–∏ —Å–º–µ–Ω–µ `activeView` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å Back navigation
   - ‚ùå MutationObserver –¥–ª—è zones ‚Äî —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ –∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ
   - ‚ùå –ü—Ä–æ–≤–µ—Ä—è—Ç—å DOM –Ω–∞–ª–∏—á–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ‚Äî race condition —Å React render

### üìå –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **–î–æ–±–∞–≤–ª—è–µ—à—å –Ω–æ–≤—ã–π –º–æ–¥–∞–ª/–ø–∞–Ω–µ–ª—å?** –î–æ–±–∞–≤—å —É—Å–ª–æ–≤–∏–µ –≤ useEffect –î–û `activeView` –ø—Ä–æ–≤–µ—Ä–æ–∫.
2. **–î–æ–±–∞–≤–ª—è–µ—à—å –Ω–æ–≤—É—é –∑–æ–Ω—É –≤ HomePanel?** –î–æ–±–∞–≤—å `activeView === 'home' && ...` —É—Å–ª–æ–≤–∏–µ.
3. **–ù–µ –ø–æ–Ω–∏–º–∞–µ—à—å –∑–∞—á–µ–º `activeView` –ø—Ä–æ–≤–µ—Ä–∫–∞?** –ü–µ—Ä–µ—á–∏—Ç–∞–π —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª.
4. **–ù–∞–≤–∏–≥–∞—Ü–∏—è –∑–∞–≤–∏—Å–∞–µ—Ç –ø–æ—Å–ª–µ —Ç–≤–æ–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π?** –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –ø—Ä–æ–≤–µ—Ä—å —ç—Ç–æ—Ç useEffect –∏ –ª–æ–≥–∏ —Å `[SpatialNav]`.

---

### ‚ùó –°–≤—è–∑–∞–Ω–Ω—ã–µ ADR
- [ADR-003: Sidebar / NUM Navigation Model](./ADR-003-Sidebar-Navigation.md)
