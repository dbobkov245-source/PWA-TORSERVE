# üó∫Ô∏è PWA-TorServe ‚Äî ROADMAP

> –≠—Ç–æ—Ç —Ñ–∞–π–ª ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á,  
> –∞ **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø–∞–º—è—Ç—å –ø—Ä–æ–µ–∫—Ç–∞**.
>
> –û–Ω —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç:
> - –∑–∞—á–µ–º –±—ã–ª–∏ –ø—Ä–∏–Ω—è—Ç—ã –∫–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è
> - —á—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ
> - –∫–∞–∫–∏–µ —à–∞–≥–∏ –ª–æ–≥–∏—á–Ω–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ
>
> Roadmap –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å,  
> –Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–º–∏.

---

## üéØ North Star (–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞)

**PWA-TorServe** ‚Äî self-hosted middleware –¥–ª—è:
- –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Ç–æ—Ä—Ä–µ–Ω—Ç-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Ä–µ–ª–∏–∑–æ–≤
- —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤ –≤ PWA / Android TV –∫–ª–∏–µ–Ω—Ç

–ü—Ä–æ–µ–∫—Ç:
- ‚ùå –Ω–µ —Ö–æ—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚ùå –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç Jackett / Prowlarr
- ‚úÖ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —É—Å—Ç–æ–π—á–∏–≤—É—é —Ä–∞–±–æ—Ç—É –≤ —É—Å–ª–æ–≤–∏—è—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (–†–§)
- ‚úÖ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –±–µ–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –¥–æ–ª–≥–∞

---

## ‚úÖ –≠–¢–ê–ü 1. Unified Network Layer ‚Äî –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (MVP)

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- –µ–¥–∏–Ω—ã–π —Å–µ—Ç–µ–≤–æ–π —Å–ª–æ–π –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- DoH (DNS-over-HTTPS) –¥–ª—è –æ–±—Ö–æ–¥–∞ DNS-–±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- retry / timeout —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- mirror rotation
- graceful degradation

---

## ‚úÖ –≠–¢–ê–ü 2. Aggregator + Unified Search Contract ‚Äî –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- `SearchAggregator` –∫–∞–∫ —Ü–µ–Ω—Ç—Ä —Å–∏—Å—Ç–µ–º—ã
- –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –æ–ø—Ä–æ—Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (`Promise.allSettled`)
- partial success –∫–∞–∫ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ infohash

---

## ‚úÖ –≠–¢–ê–ü 3. Provider Architecture + Core Providers ‚Äî –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- `BaseProvider` –∏ `ProviderManager`
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏: Jacred, RuTracker (auth), Rutor, TorLook

---

## ‚úÖ –≠–¢–ê–ü 4. AutoDownloader v2 ‚Äî –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- –æ—Ç–∫–∞–∑ –æ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –æ–¥–Ω–æ–º—É –∏—Å—Ç–æ—á–Ω–∏–∫—É
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Aggregator
- –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–æ–∫ –∏ –≤—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ —Ä–µ–ª–∏–∑–∞

---

## ‚úÖ –≠–¢–ê–ü 5. Client / PWA Improvements ‚Äî –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- **Backend API v2:** Envelope pattern, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö.
- **TV-first UX:** –ù–∞—Ç–∏–≤–Ω–∞—è D-pad –Ω–∞–≤–∏–≥–∞—Ü–∏—è, Focus Trap.
- **Smart UI:** –§–∏–ª—å—Ç—Ä—ã –∫–∞—á–µ—Å—Ç–≤–∞, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞.
- **Voice Search:** Android Speech Recognition integration.

---

## ‚úÖ –≠–¢–ê–ü 6. Client Architecture Refinement & UX ‚Äî –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (Metadata):** –û—Ç–∫–∞–∑–∞–ª–∏—Å—å –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è Backend API (`/api/v2/metadata`) –≤ –ø–æ–ª—å–∑—É —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ **"Zero-Cost Frontend Enrichment"**.
–¢–∞–∫ –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç (`Poster.jsx`) —É–∂–µ —Ö–æ–¥–∏—Ç –≤ TMDB/–ö–∏–Ω–æ–ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ –∑–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏, –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π JSON —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º. –ú—ã –±—É–¥–µ–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ, –Ω–µ –Ω–∞–≥—Ä—É–∂–∞—è –±—ç–∫–µ–Ω–¥.

### 6.1. Metadata Layer (Frontend Only)
> *–û–ø–∏—Å–∞–Ω–∏—è —Ñ–∏–ª—å–º–æ–≤ –±–µ–∑ –Ω–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.*

**`Poster.jsx` (Data Ingestion):**
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è: —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ `localStorage` —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç.
  - **–í–∞–∂–Ω–æ:** –î–æ–±–∞–≤–∏—Ç—å `timestamp` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π LRU-–æ—á–∏—Å—Ç–∫–∏.
  ```json
  {
    "poster": "https://...",
    "backdrop": "https://...",
    "overview": "–¢–µ–∫—Å—Ç –æ–ø–∏—Å–∞–Ω–∏—è...",
    "rating": 7.8,
    "year": "2024",
    "title": "–ù–∞–∑–≤–∞–Ω–∏–µ",
    "timestamp": 1704067200000 
  }
[ ] LRU Eviction: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è (–ª–∏–º–∏—Ç ~300 –∑–∞–ø–∏—Å–µ–π). –£–¥–∞–ª—è—Ç—å —Å–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ –ø–æ timestamp.

‚ö†Ô∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

localStorage –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ best-effort cache.

–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–Ω–æ –ª–æ–º–∞—Ç—å UI (Graceful Degradation).

TorrentModal.jsx (Data Presentation):

[ ] –ß—Ç–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage –ø–æ –∫–ª—é—á—É.

[ ] UI Update:

–ö—Ä–∞—Å–∏–≤—ã–π Header —Å Backdrop. –í–∞–∂–Ω–æ: –ï—Å–ª–∏ backdrop –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—Ä–∞—Å–∏–≤—ã–π CSS-–≥—Ä–∞–¥–∏–µ–Ω—Ç (Fallback).

–í—ã–≤–æ–¥ —Ä–µ–π—Ç–∏–Ω–≥–∞ (Badge) —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π (üü¢ >7, üü° >5, üî¥ <5).

–ë–ª–æ–∫ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º (overview) —Å line-clamp –∏ –∫–Ω–æ–ø–∫–æ–π "–ï—â–µ".

6.2. Refactoring: TV Navigation Hook & Main Grid
–ö–†–ò–¢–ò–ß–ù–û: –û–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é —Å –ø—É–ª—å—Ç–∞ –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

[ ] useTVNavigation Hook:

–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏–π.

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Grid Navigation (2D: –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ + –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ).

–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–ª–æ–Ω–æ–∫ (Responsive).

[ ] –í–Ω–µ–¥—Ä–µ–Ω–∏–µ (Refactoring):

SearchPanel.jsx (–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫).

TorrentModal.jsx (–°–ø–∏—Å–æ–∫ —ç–ø–∏–∑–æ–¥–æ–≤).

App.jsx (–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω): ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–æ–º –¥–ª—è —Å–µ—Ç–∫–∏ —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤ (—Å–µ–π—á–∞—Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç).

6.3. UX: Enhanced Provider Health & Accessibility
–ü–æ–Ω—è—Ç–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å.

[ ] Interactive Status Chips:

–ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Tooltip —Å –æ—à–∏–±–∫–æ–π).

–ë–∞–Ω–Ω–µ—Ä "All Sources Failed", –µ—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —É–ø–∞–ª–∏ (—Å –∫–Ω–æ–ø–∫–æ–π "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞").

–¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞: Error (üî¥) vs Timeout (üü°).

[ ] Accessibility:

–î–æ–±–∞–≤–∏—Ç—å aria-label –¥–ª—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫-–∏–∫–æ–Ω–æ–∫ (Voice Search, Settings, etc).

### 6.4. TorrentModal TV Optimization
> *–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –≤—ã—Ö–æ–¥–∏—Ç—å –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —ç–∫—Ä–∞–Ω–∞ TV.*

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–µ—Ä–∏–π (>15) —Å–ø–∏—Å–æ–∫ —ç–ø–∏–∑–æ–¥–æ–≤ –≤—ã—Ç–∞–ª–∫–∏–≤–∞–µ—Ç header —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —ç–∫—Ä–∞–Ω–∞.

**–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- [ ] **Fixed Header:** –ó–∞–∫—Ä–µ–ø–∏—Ç—å header —Å backdrop/—Ä–µ–π—Ç–∏–Ω–≥–æ–º, —Å–∫—Ä–æ–ª–ª —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø–∏—Å–∫–∞ —ç–ø–∏–∑–æ–¥–æ–≤.
- [ ] **–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª:** –†–µ–Ω–¥–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ —ç–ø–∏–∑–æ–¥—ã (~10) –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
- [ ] **Collapse –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –°–∫—Ä—ã–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ —ç–ø–∏–∑–æ–¥–æ–≤, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ "‚ñº 25 —ç–ø–∏–∑–æ–¥–æ–≤" (—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –ø–æ –∫–ª–∏–∫—É).
- [ ] **Limit Height:** –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å max-height —Å–ø–∏—Å–∫–∞ —ç–ø–∏–∑–æ–¥–æ–≤ –¥–æ `40vh`.

---


–î–æ—Ä–æ–∂–Ω–∞—è –ö–∞—Ä—Ç–∞ PWA-TorServe v3.0 ‚Äî ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û
–¶–µ–ª—å: –°–æ–∑–¥–∞—Ç—å Netflix-like –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –∏—Å–ø–æ–ª—å–∑—É—è –≤–∞—à—É –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é 5-—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –∏ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ "—É–∑–∫–∏–µ –º–µ—Å—Ç–∞" (DNS Poisoning –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ).

üèõÔ∏è –§–∞–∑–∞ 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –§—É–Ω–¥–∞–º–µ–Ω—Ç (Refactoring)
–í—ã –ø–æ–±–µ–¥–∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ Poster.jsx, –Ω–æ —Ç–µ–ø–µ—Ä—å —ç—Ç—É –ª–æ–≥–∏–∫—É –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–∑–¥–µ (–≤ –ø–æ–∏—Å–∫–µ, –≤ –ø–æ–¥–±–æ—Ä–∫–∞—Ö, –≤ –¥–µ—Ç–∞–ª—è—Ö —Ñ–∏–ª—å–º–∞). –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –Ω–µ–ª—å–∑—è.

‚úÖ –ó–∞–¥–∞—á–∞ 1.1: –°–æ–∑–¥–∞–Ω–∏–µ tmdbClient.js (Unified Fetcher)
–í—ã–Ω–æ—Å–∏–º –ª–æ–≥–∏–∫—É –∏–∑ Poster.jsx –≤ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é —É—Ç–∏–ª–∏—Ç—É.

–§–∞–π–ª: client/src/utils/tmdbClient.js

–õ–æ–≥–∏–∫–∞:

–ü—Ä–∏–Ω–∏–º–∞–µ—Ç endpoint (–Ω–∞–ø—Ä. /trending/all/week).

–ü—Ä–æ–≥–æ–Ω—è–µ—Ç —á–µ—Ä–µ–∑ –∫–∞—Å–∫–∞–¥ (Custom Worker -> Lampa Proxy -> CapacitorHttp -> Corsproxy -> Kinopoisk).

–£–ª—É—á—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª—è–µ–º Client-side DoH (—Å–º. –§–∞–∑—É 3), —á—Ç–æ–±—ã –ø–æ—á–∏–Ω–∏—Ç—å CapacitorHttp –≤ –†–§.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç { results: [...], source: 'tmdb' | 'kp' }.

‚úÖ –ó–∞–¥–∞—á–∞ 1.2: Hardcoded Genre Map
TMDB –≤ —Å–ø–∏—Å–∫–∞—Ö –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ ID –∂–∞–Ω—Ä–æ–≤ ([28, 878]), –∞ –Ω–µ –Ω–∞–∑–≤–∞–Ω–∏—è. –ß—Ç–æ–±—ã –Ω–µ –¥–µ–ª–∞—Ç—å –ª–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã:

–§–∞–π–ª: client/src/utils/genres.js

–î–µ–π—Å—Ç–≤–∏–µ: –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å: { 28: "–ë–æ–µ–≤–∏–∫", 878: "–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞", ... }.

üì∫ –§–∞–∑–∞ 2: –ì–ª–∞–≤–Ω–∞—è –°—Ç—Ä–∞–Ω–∏—Ü–∞ (Discovery)
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ "–∫–∞–∫ –≤ Lampa/Netflix" –±–µ–∑ –±—ç–∫–µ–Ω–¥–∞.

‚úÖ –ó–∞–¥–∞—á–∞ 2.1: –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ API (discover.js)
–ò–º–ø–æ—Ä—Ç: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç tmdbClient.js –∏–∑ –§–∞–∑—ã 1.

–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:

üî• –¢—Ä–µ–Ω–¥—ã (/trending/all/week)

üé¨ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å–º—ã (/movie/popular)

üì∫ –°–µ—Ä–∏–∞–ª—ã (/tv/popular)

‚≠ê –¢–æ–ø —Ä–µ–π—Ç–∏–Ω–≥–∞ (/movie/top_rated)

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –£–¥–∞–ª—è—Ç—å –ª—é–¥–µ–π (media_type: person) –∏ –∫–æ–Ω—Ç–µ–Ω—Ç –±–µ–∑ –ø–æ—Å—Ç–µ—Ä–æ–≤.

‚úÖ –ó–∞–¥–∞—á–∞ 2.2: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç HomeRow.jsx (–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫)
–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è: –†–µ–Ω–¥–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ + 2 —Å–æ—Å–µ–¥–Ω–∏—Ö –ø–æ—Å—Ç–µ—Ä–∞ (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è TV —Å –º–∞–ª–æ–π –ø–∞–º—è—Ç—å—é).

–ù–∞–≤–∏–≥–∞—Ü–∏—è:

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useTVNavigation —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º loop: true.

–ü—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ –ø–æ—Å—Ç–µ—Ä–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å Backdrop –Ω–∞ —Ñ–æ–Ω–µ (–∫—Ä–∞—Å–∏–≤—ã–π —ç—Ñ—Ñ–µ–∫—Ç Lampa).

‚úÖ –ó–∞–¥–∞—á–∞ 2.3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TorServe
–õ–æ–≥–∏–∫–∞ –∫–ª–∏–∫–∞:

–ï—Å–ª–∏ —Ñ–∏–ª—å–º: –ò—Å–∫–∞—Ç—å –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é + –≥–æ–¥.

–ï—Å–ª–∏ —Å–µ—Ä–∏–∞–ª: –ò—Å–∫–∞—Ç—å –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é + S01 (–∫–∞–∫ –æ–±—Å—É–∂–¥–∞–ª–æ—Å—å, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –ø–∞–∫ —Å–µ–∑–æ–Ω–∞).

üõ°Ô∏è –§–∞–∑–∞ 3: Client-Side DNS-over-HTTPS (–ù–æ–≤–∞—è —Ñ–∏—á–∞)
–í –ê–∫—Ç–µ 11 –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –≤—ã –∑–∞–º–µ—Ç–∏–ª–∏, —á—Ç–æ CapacitorHttp –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ 127.0.0.1 –∏–∑-–∑–∞ DNS Poisoning –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º. –ú—ã –∏—Å–ø—Ä–∞–≤–∏–ª–∏ —ç—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ê–∫—Ç 6), —Ç–µ–ø–µ—Ä—å –∏—Å–ø—Ä–∞–≤–∏–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.

‚úÖ –ó–∞–¥–∞—á–∞ 3.1: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è resolveIP –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
–ò–¥–µ—è: –ü–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º CapacitorHttp —É–∑–Ω–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π IP —á–µ—Ä–µ–∑ Google/Cloudflare DNS API (–æ–Ω–∏ –æ–±—ã—á–Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è).

–ö–æ–¥ (–ø—Ä–∏–º–µ—Ä):

JavaScript

async function resolveClientIP(hostname) {
   // –ó–∞–ø—Ä–æ—Å –∫ Google DNS API
   const res = await fetch(`https://dns.google/resolve?name=${hostname}&type=A`);
   const data = await res.json();
   return data.Answer?.[0]?.data; // –†–µ–∞–ª—å–Ω—ã–π IP (–Ω–∞–ø—Ä. 65.8.11.22)
}
‚úÖ –ó–∞–¥–∞—á–∞ 3.2: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –≤ CapacitorHttp
–õ–æ–≥–∏–∫–∞:

–ü–æ–ª—É—á–∞–µ–º IP –¥–ª—è api.themoviedb.org.

–î–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ https://<IP>/3/....

–ü–µ—Ä–µ–¥–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ Host: api.themoviedb.org.

–†–µ–∑—É–ª—å—Ç–∞—Ç: CapacitorHttp –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –†–§ –±–µ–∑ VPN (—Ç–∞–∫ –∫–∞–∫ –º—ã –æ–±–æ—à–ª–∏ –æ—Ç—Ä–∞–≤–ª–µ–Ω–Ω—ã–π DNS), —á—Ç–æ –¥–∞—Å—Ç SSL-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥–∞.

‚ö° –§–∞–∑–∞ 4: –ö–∏–Ω–æ–ø–æ–∏—Å–∫ –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Fallback (–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ)
–°–µ–π—á–∞—Å –ö–∏–Ω–æ–ø–æ–∏—Å–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–∞—Ä—Ç–∏–Ω–æ–∫. –ù–æ –µ—Å–ª–∏ TMDB –ª—è–∂–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é, –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –ø—É—Å—Ç–æ–π.

‚úÖ –ó–∞–¥–∞—á–∞ 4.1: –ê–¥–∞–ø—Ç–µ—Ä Discovery –¥–ª—è –ö–∏–Ω–æ–ø–æ–∏—Å–∫–∞
–í discover.js: –ï—Å–ª–∏ –≤—Å–µ –∑–µ—Ä–∫–∞–ª–∞ TMDB –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –Ω–∞ API –ö–∏–Ω–æ–ø–æ–∏—Å–∫–∞.

–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã KP:

–¢—Ä–µ–Ω–¥—ã -> /api/v2.2/films/collections?type=TOP_POPULAR_ALL

–¢–æ–ø -> /api/v2.2/films/collections?type=TOP_250_MOVIES

–ú–∞–ø–ø–∏–Ω–≥: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç KP –≤ —Ñ–æ—Ä–º–∞—Ç TMDB (id, title, poster_path), —á—Ç–æ–±—ã UI –Ω–µ –∑–∞–º–µ—Ç–∏–ª –ø–æ–¥–º–µ–Ω—ã.

üèÅ –ò—Ç–æ–≥–æ–≤–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v3.0
–≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ª—é–±—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.

UI Layer: HomePanel -> HomeRow -> Poster

Data Layer: discover.js (–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ + –õ–æ–≥–∏–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π)

Network Layer (tmdbClient.js):

üîÑ –ü–æ–ø—ã—Ç–∫–∞ 1: Custom Worker (–î–ª—è –∑–∞—Ä—É–±–µ–∂—å—è).

üîÑ –ü–æ–ø—ã—Ç–∫–∞ 2: Lampa Proxy (MVP –¥–ª—è –†–§).

üîÑ –ü–æ–ø—ã—Ç–∫–∞ 3: CapacitorHttp + Client DoH (–ù–∞—Ç–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥ DNS poisoning).

üîÑ –ü–æ–ø—ã—Ç–∫–∞ 4: Corsproxy.io (–ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π fallback).

üîÑ –ü–æ–ø—ã—Ç–∫–∞ 5: –ö–∏–Ω–æ–ø–æ–∏—Å–∫ API (–ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö).

Fail-safe: –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã (Offline mode).

–ù–Æ–ê–ù–° (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—á—Ç–∏)

–ö–æ–≥–¥–∞ —Ç—ã –¥–µ–ª–∞–µ—à—å:

https://<IP>/3/...
Host: api.themoviedb.org


‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

TLS SNI

—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞—Å—Ç—å

‚úÖ –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û HTTPS

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ CapacitorHttp:

–Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç CN —Å—Ç—Ä–æ–≥–æ
(–æ–±—ã—á–Ω–æ –æ–Ω –¥–æ–≤–µ—Ä—è–µ—Ç —Å–∏—Å—Ç–µ–º–µ)

üìå –ü—Ä–∞–≤–∏–ª–æ:

Client DoH ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è CapacitorHttp,
‚ùå –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–ª—è browser fetch

–¢—ã —ç—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∏ —É–∂–µ —Å–æ–±–ª—é–¥–∞–µ—à—å ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π.
üó∫Ô∏è ROADMAP v3.1: Operation "Unstoppable" & TV Resurrection
Version: 3.1
Status: üö¶ READY FOR DEV
Target Platform: Android TV / Smart TV / PWA
Focus: Resilience (Anti-Censorship), Navigation (D-Pad), UX Performance.

ü§ñ AI AGENT INSTRUCTION: CONTEXT VERIFICATION
STOP! READ THIS BEFORE EXECUTING.
Before implementing any task from this roadmap, you MUST perform a Pre-Work Context Scan:
 * Scan the file structure: Verify if files mentioned (e.g., useTVNavigation.js, server/utils/doh.js) exist or are empty.
 * Check git status or recent commits: Ensure no one else has implemented these features recently.
 * Validate assumptions: If a task says "Code is missing," but you see the code, update the roadmap status and ask the user for a new direction.
 * Propose Improvements: If you see a cleaner architectural solution than described below (e.g., using a newer library or pattern), propose it to the user before writing code.

üìÖ Execution Batches
–ú—ã –≤—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–¥–∞—á–∏ –ø–∞–∫–µ—Ç–∞–º–∏ (Batches) –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–±–æ—Ä–∫–∏.

üì¶ Batch 1: "Resurrection" (TV Core)
–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —ç—Ç–∞–ø. –ë–µ–∑ –Ω–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ –Ω–∞ –¢–í.
 * FIX-01a: 1D List Navigation (–ë–∞–∑–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ + CSS Focus state)
 * FIX-01b: 2D Grid Navigation (–î–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫)
 * FIX-01c: Modal Focus Trap (–£–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–æ–∫—É—Å–∞)
 * SEC-01: Global Error Boundary

üì¶ Batch 2: "Unstoppable" (Network Resilience)
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤—ã–∂–∏–≤–∞–Ω–∏—è. –ó–∞—â–∏—Ç–∞ –æ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ CDN –∏ DNS.
 * ARC-01: Server-Side DoH Rotation + Circuit Breaker
 * ARC-02: Client Waterfall Fetching (NAS -> Proxy -> Direct -> Gradient UI)

üì¶ Batch 3: "Polish" (UX & Performance)
–£–ª—É—á—à–µ–Ω–∏–µ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏.
 * UX-02: Server-Side Badge Parsing (Backend API update)
 * UX-01: SearchPanel Performance (Debounce + Memo)
 * UX-03: Client-Side Sorting & Filtering

üì¶ Batch 4: "Validation"
 * TEST-01: Real Device Testing

üìã Detailed Task List

| ID | Task Name | Priority | Complexity | Description & Tech Stack |
|---|---|---|---|---|
| FIX-01a | 1D List Navigation | MUST | Mid | Stack: React Hook (useTVNavigation). <br>Desc: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É ArrowUp/ArrowDown. **–í–∞–∂–Ω–æ: –î–æ–±–∞–≤–∏—Ç—å CSS-–∫–ª–∞—Å—Å `.focused` –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞.** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∫—Ä–æ–ª–ª–∞ —á–µ—Ä–µ–∑ scrollIntoView. |
| FIX-01b | 2D Grid Navigation | MUST | High | Stack: React Hook. <br>Desc: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É columns > 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ ArrowLeft/ArrowRight. –£–º–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤–Ω–∏–∑). |
| FIX-01c | Modal Focus Trap | MUST | Mid | Stack: React (useEffect, DOM). <br>Desc: –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏ (TorrentModal) —Ñ–æ–∫—É—Å –¥–æ–ª–∂–µ–Ω –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ –Ω–µ—ë –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –Ω–∞ –∫–Ω–æ–ø–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏. |
| SEC-01 | Error Boundary | SHOULD | Low | Stack: React Class Component. <br>Desc: –û–±–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –∫—Ä–∞—à –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–µ –≤–µ—à–∞–ª –≤–µ—Å—å TV-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–±–µ–ª—ã–π —ç–∫—Ä–∞–Ω). |
| ARC-01 | Server DoH Rotation | DONE | Mid | Stack: Node.js (fetch). <br>Desc: –í doh.js –≤–Ω–µ–¥—Ä–µ–Ω –º–∞—Å—Å–∏–≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Google, Quad9, Cloudflare). –õ–æ–≥–∏–∫–∞ Race —Å —Ç–∞–π–º–∞—É—Ç–æ–º 2—Å–µ–∫ + Circuit Breaker. |
| ARC-02 | Client Waterfall | DONE | High | Stack: React (AbortSignal). <br>Desc: –í tmdbClient.js 5 —É—Ä–æ–≤–Ω–µ–π: Worker -> Lampa Proxy -> CapacitorHttp (DoH) -> Direct -> Gradient. |
| UX-01 | Search Performance | DONE | Low | Stack: React 18 (useDeferredValue) OR use-debounce. <br>Desc: –£–±—Ä–∞—Ç—å –ª–∞–≥–∏ –≤–≤–æ–¥–∞. –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. |
| UX-02 | Backend Badges | DONE | Mid | Stack: Node.js (Express). <br>Desc: –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ (4K, HDR, HEVC) –Ω–∞ —Å–µ—Ä–≤–µ—Ä. /api/v2/search –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–µ badges[] –∏ health. |
| UX-03 | Client Sort/Filter | DONE | Low | Stack: React (useState). <br>Desc: UI –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (Seeds/Size) –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏. –°–≤—è–∑–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ UX-02. |
| TEST-01 | Device Testing | DONE | Low | Stack: Android TV / FireStick. <br>Desc: –¢–µ—Å—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –∂–µ–ª–µ–∑–µ. Fix: Navbar access, Focus clipping, Scroll jitter, Back button logic. |
| OPT-01 | List Virtualization | WONT | High | –û—Ç–ª–æ–∂–µ–Ω–æ. react-window –ø–æ–∫–∞ –Ω–µ –≤–Ω–µ–¥—Ä—è–µ–º, —Ä–µ—à–∞–µ–º –ø—Ä–æ–±–ª–µ–º—ã —á–µ—Ä–µ–∑ UX-01. |

üõ†Ô∏è Technical Specifications (Reference for AI)

1. Navigation Logic (FIX-01)
Hook –¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å containerRef –∏ itemSelector.
–í–∏–∑—É–∞–ª: –ò—Å–ø–æ–ª—å–∑—É–π CSS transform (scale) –∏–ª–∏ border –¥–ª—è —Ñ–æ–∫—É—Å–∞.
–°–∫—Ä–æ–ª–ª: `el.scrollIntoView({ behavior: 'smooth', block: 'center' })` —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–∫–∞—á–∫–æ–≤.

// Expected Logic Pattern for 2D
const nextIndex = (current, key, cols) => {
   if (key === 'ArrowDown') return current + cols;
   if (key === 'ArrowRight' && (current % cols !== cols - 1)) return current + 1;
   // ... handle boundaries
}

2. Resilience Architecture (ARC-01/02)
Server-Side:
–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ 1.1.1.1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ DOH_PROVIDERS.
Client-Side:
// Waterfall Strategy
try {
  return await fetchLocalNAS(query);
} catch {
  console.warn("NAS unreachable, trying Cloudflare Worker...");
  try {
     return await fetchExternalWorker(query);
  } catch {
     return generateGradientPlaceholder(query); // Final Fallback
  }
}

3. Badge Parsing (UX-02 - Server Side)
–í —Ñ–∞–π–ª–µ server/utils/helpers.js (–∏–ª–∏ server/providers/BaseProvider.js) —Å–æ–∑–¥–∞—Ç—å:
function extractMetadata(title) {
  return {
    badges: [
      /2160p|4k/i.test(title) && '4K',
      /hevc|x265/i.test(title) && 'HEVC'
    ].filter(Boolean),
    // ...
  }
}
---

## üó∫Ô∏è ROADMAP v3.1: Operation "Unstoppable" (Post-Mortem & Status)
**Version:** 3.1 (Legacy)
**Status:** üèÅ ARCHIVED (–ü–µ—Ä–µ—Ö–æ–¥ –∫ v3.2)
**Outcome:** –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏ –≤–Ω–µ–¥—Ä–µ–Ω—ã, –Ω–æ –∞—É–¥–∏—Ç –≤—ã—è–≤–∏–ª –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã –∏ "–º–µ—Ä—Ç–≤—ã–π –∫–æ–¥".

| ID | Task Name | Status | Notes |
|---|---|---|---|
| FIX-01a | 1D List Navigation | ‚úÖ DONE | –ë–∞–∑–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç. |
| FIX-01b | 2D Grid Navigation | ‚úÖ DONE | Grid —Ä–∞–±–æ—Ç–∞–µ—Ç. |
| FIX-01c | Modal Focus Trap | ‚ùå FAILED | **Regression:** Escape –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ñ–æ–∫—É—Å —Ç–µ—Ä—è–µ—Ç—Å—è. (–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ v3.2) |
| ARC-01 | Server DoH Rotation | ‚úÖ DONE | –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ. |
| ARC-02 | Client Waterfall | ‚ö†Ô∏è REOPENED | **Critical:** –õ–æ–≥–∏–∫–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞, –Ω–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∞ (`resolveClientIP` –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è). |
| UX-01 | Search Performance | ‚úÖ DONE | Debounce –≤–Ω–µ–¥—Ä–µ–Ω. |
| OPT-01 | List Virtualization | üîÑ MOVED | –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–µ–Ω —Å WONT –Ω–∞ **SHOULD** (—Ç–µ—Å—Ç—ã –Ω–∞ TV Box –ø–æ–∫–∞–∑–∞–ª–∏ —Ñ—Ä–∏–∑—ã). |

---

## üó∫Ô∏è ROADMAP v3.2: Stabilization & The Last Mile
**Version:** 3.2 (Release Candidate)
**Status:** ‚úÖ PHASE 0 COMPLETE (Audit: 2025-01-20)
**Focus:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —É—Ç–µ—á–µ–∫, –≤–∫–ª—é—á–µ–Ω–∏–µ "—Å–ø—è—â–µ–≥–æ" –∫–æ–¥–∞ (Client DoH) –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ —Å–ª–∞–±–æ–µ –∂–µ–ª–µ–∑–æ.

> **üìã AUDIT RESULTS (2025-01-20):**
> - BUG-01, BUG-02, ARC-02 ‚Äî –∫–æ–¥ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –∑–∞–¥–∞—á–∏ –∑–∞–∫—Ä—ã—Ç—ã.
> - OPT-01 ‚Äî **–ó–ê–ú–û–†–û–ñ–ï–ù** –∏–∑-–∑–∞ –≤—ã—Å–æ–∫–æ–≥–æ —Ä–∏—Å–∫–∞ –ø–æ–ª–æ–º–∫–∏ TV-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

### üìÖ Execution Phases

#### ‚úÖ Phase 0: Critical Hotfixes (Stabilization) ‚Äî DONE
*–†–µ–∑—É–ª—å—Ç–∞—Ç –∞—É–¥–∏—Ç–∞: 3 –∏–∑ 4 –∑–∞–¥–∞—á —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ –∫–æ–¥–µ.*
* ‚úÖ **BUG-01:** Modal Trap & Escape ‚Äî `e.stopPropagation()` –∏ `previouslyFocusedRef` —É–∂–µ –≤ –∫–æ–¥–µ.
* ‚úÖ **BUG-02:** Memory Leak ‚Äî –∑–∞—â–∏—Ç–∞ `if (frozenCleanupIntervalId) return` —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞.
* üîÑ **BUG-03:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è UI —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Real-time update). **TODO**
* üîÑ **FIX-01:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è `AutoDownloadPanel` (–≤–Ω–µ–¥—Ä–µ–Ω–∏–µ `useTVNavigation`). **TODO**

#### ‚úÖ Phase 1: True Resilience (Operation "Unstoppable") ‚Äî DONE
*–†–µ–∑—É–ª—å—Ç–∞—Ç –∞—É–¥–∏—Ç–∞: Client DoH –∞–∫—Ç–∏–≤–µ–Ω –¥–ª—è APK.*
* ‚úÖ **ARC-02:** Client DoH **–£–ñ–ï –ê–ö–¢–ò–í–ï–ù** ‚Äî `resolveClientIP()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `tryCapacitorWithDoH()`.
* üîÑ **SEC-01:** –í–Ω–µ–¥—Ä–∏—Ç—å Global Error Boundary (–∑–∞—â–∏—Ç–∞ –æ—Ç –±–µ–ª–æ–≥–æ —ç–∫—Ä–∞–Ω–∞). **TODO**

#### ‚ö†Ô∏è Phase 2: Performance & Polish ‚Äî ACTIVE
*–¶–µ–ª—å: –ü–ª–∞–≤–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ —Å–ª–∞–±—ã—Ö TV Box –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–∞.*
* ‚úÖ **BUG-04:** Fix Modal Focus Loss ‚Äî –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è TV. –ï—Å–ª–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è, —Ñ–æ–∫—É—Å —Å–ª–µ—Ç–∞–µ—Ç –≤ `body`.
* ‚úÖ **OPT-02:** Torrent Status Cache ‚Äî –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è ARM. –°–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É CPU –ø—Ä–∏ –ø–æ–ª–ª–∏–Ω–≥–µ (0ms vs 200ms).
* ‚õî **OPT-01:** –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤ ‚Äî **–ó–ê–ú–û–†–û–ñ–ï–ù**.
* üîÑ **UX-04:** Client-side Debounce –¥–ª—è –∫–Ω–æ–ø–æ–∫. **TODO**

#### üèóÔ∏è Phase 3: Architecture (Post-Release / Backlog)
* **BE-01:** –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –º–æ–Ω–æ–ª–∏—Ç–∞ `server/index.js`. **DEFERRED**. (Refactoring is dangerous right now).
* **OPT-01:** –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–º `useTVNavigation`.

---

### üìã Detailed Task List (v3.2)

| ID | Task Name | Status | Priority | Complexity | Description & Tech Stack |
|---|---|---|---|---|---|
| **BUG-01** | **Fix Modal Trap & Escape** | ‚úÖ DONE | ~~MUST~~ | Low | **–ö–æ–¥ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω:** `TorrentModal.jsx` —Å—Ç—Ä–æ–∫–∏ 63-69, 104-106. `e.stopPropagation()` –∏ `previouslyFocusedRef` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç. |
| **BUG-02** | **Memory Leak Patch** | ‚úÖ DONE | ~~MUST~~ | Low | **–ö–æ–¥ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω:** `server/torrent.js` —Å—Ç—Ä–æ–∫–∏ 32-36. –ó–∞—â–∏—Ç–∞ `if (frozenCleanupIntervalId) return` —Ä–∞–±–æ—Ç–∞–µ—Ç. |
| **BUG-03** | **Search Providers UI Sync** | ‚úÖ DONE | ~~MUST~~ | Mid | **–ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω:** API endpoint `/api/providers/status` + polling –≤ `App.jsx` –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫. |
| **FIX-01** | **Standardize AutoDownload** | ‚è≠Ô∏è WONTFIX | ~~MUST~~ | Mid | **–ü–µ—Ä–µ–æ—Ü–µ–Ω–µ–Ω–æ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–∂–µ –∏–º–µ–µ—Ç D-pad –Ω–∞–≤–∏–≥–∞—Ü–∏—é —á–µ—Ä–µ–∑ `getFocusableElements()` + focus trap. –•—É–∫ `useTVNavigation` –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≥–µ—Ç–µ—Ä–æ–≥–µ–Ω–Ω–æ–≥–æ UI (–∫–Ω–æ–ø–∫–∏ + picker + —Ñ–æ—Ä–º–∞ + —Å–ø–∏—Å–æ–∫). |
| **ARC-02** | **Activate Client DoH** | ‚úÖ DONE | ~~MUST~~ | High | **–ö–æ–¥ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω:** `tmdbClient.js` —Å—Ç—Ä–æ–∫–∏ 254, 262. DoH –∞–∫—Ç–∏–≤–µ–Ω –¥–ª—è –Ω–∞—Ç–∏–≤–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. |
| **OPT-01** | **List Virtualization** | ‚õî FROZEN | ~~SHOULD~~ | High | **–†–ò–°–ö:** –°–ª–æ–º–∞–µ—Ç `useTVNavigation`. –¢—Ä–µ–±—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è. –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ Phase 3. |
| **SEC-01** | **Global Error Boundary** | ‚úÖ DONE | ~~SHOULD~~ | Low | **–ö–æ–¥ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω:** `components/ErrorBoundary.jsx` (125 —Å—Ç—Ä–æ–∫) + –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `main.jsx`. |
| **UX-04** | **Click Debounce** | ‚úÖ DONE | ~~SHOULD~~ | Low | **–ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω:** `App.jsx` —Å—Ç—Ä–æ–∫–∞ 412. Early return `if (searchLoading) return` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥–≤–æ–π–Ω—ã–µ –∫–ª–∏–∫–∏. |
| **UX-05** | **More Button Focus Fix** | ‚úÖ DONE | ~~MUST~~ | Low | **–ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω:** `HomeRow.jsx` —Å—Ç—Ä–æ–∫–∞ 150. –£–≤–µ–ª–∏—á–µ–Ω —Ç–∞–π–º–∞—É—Ç —Ñ–æ–∫—É—Å–∞ —Å 0 –¥–æ 50–º—Å. |
| **UX-06** | **Category Deduplication** | ‚úÖ DONE | ~~MUST~~ | Low | **–ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω:** `discover.js`. –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —á–µ—Ä–µ–∑ `seenIds` Set. |
| **UX-07** | **SettingsPanel Simplify** | ‚úÖ DONE | ~~SHOULD~~ | Low | **–ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω:** `SettingsPanel.jsx`. Player Selection —Ç–µ–ø–µ—Ä—å —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º—ã–π. |
| **UX-08** | **Smooth Poster Scroll** | ‚úÖ DONE | ~~SHOULD~~ | Low | **–ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω:** `HomeRow.jsx` + `index.css`. scrollTo —Å —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º, CSS scroll-behavior. |
| **UX-09** | **Extended Movie Card** | ‚úÖ DONE | ~~SHOULD~~ | Medium | **–ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω:** `MovieDetail.jsx` + `tmdbClient.js`. –†–µ–∂–∏—Å—Å—ë—Ä—ã, –∞–∫—Ç—ë—Ä—ã —Å —Ñ–æ—Ç–æ, —Ç—Ä–µ–π–ª–µ—Ä. |
| **TEST-02** | **Client Unit Tests** | ‚úÖ DONE | ~~SHOULD~~ | Low | Vitest –Ω–∞—Å—Ç—Ä–æ–µ–Ω. 30/30 —Ç–µ—Å—Ç–æ–≤: `discover.test.js`, `helpers.test.js`. |
| **BUG-04** | **Modal Focus Fix** | üîÑ TODO | MUST | Mid | **Stability:** –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ç–µ—Ä—é —Ñ–æ–∫—É—Å–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `activeElement` capture. |
| **OPT-02** | **Torrent Status Cache** | ‚úÖ DONE | MUST | Mid | **Perf:** –ö—ç—à JSON –æ—Ç–≤–µ—Ç–∞ (5 —Å–µ–∫). –ö–æ–¥ —É–∂–µ –≤ `server/torrent.js`:381. –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ—Ä–∏–∑—ã –Ω–∞ ARM. |

---

### üêõ Backlog ‚Äî –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –±–∞–≥–∏ (2026-01-31)

| ID | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –î–µ—Ç–∞–ª–∏ |
|----|----------|-----------|--------|
| ~~**BUG-10**~~ | ~~**–ö–Ω–æ–ø–∫–∞ "–°–º–æ—Ç—Ä–µ—Ç—å —Ç—Ä–µ–π–ª–µ—Ä" –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ —Å –ø—É–ª—å—Ç–∞**~~ | ~~HIGH~~ | ‚úÖ **FIXED (2026-01-21):** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ `@capacitor/browser`. –¢—Ä–µ–π–ª–µ—Ä—ã YouTube –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. |
| ~~**BUG-11**~~ | ~~**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ —Å –ø—É–ª—å—Ç–∞**~~ | ~~MEDIUM~~ | ‚úÖ **FIXED (2026-01-25):** –ü–µ—Ä–µ–ø–∏—Å–∞–Ω `DiagnosticsPanel` –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥–∞–ª —Å Focus Trap. |
| **BUG-FREEZE** | **–ó–∞–≤–∏—Å–∞–Ω–∏–µ My List –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞** | HIGH | **NEW (2026-01-31):** –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞ –∏–∑ –ø–æ–∏—Å–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –∑–∞—Ç–µ–º –∑–∞–≤–∏—Å–∞–µ—Ç. –ü—Ä–∏—á–∏–Ω–∞: stale references –≤ SpatialEngine. –ß–∞—Å—Ç–∏—á–Ω–æ —É–ª—É—á—à–µ–Ω–æ —á–µ—Ä–µ–∑ `document.body.contains()` –ø—Ä–æ–≤–µ—Ä–∫—É, –Ω–æ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–æ. |

---

## üóìÔ∏è SESSION LOG: 31.01.2026

### üéØ –¶–µ–ª–∏ —Å–µ—Å—Å–∏–∏
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∞–Ω–∏–µ My List** –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞ –∏–∑ –ø–æ–∏—Å–∫–∞.
2. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –≤ –ø–æ–∏—Å–∫–µ** ‚Äî —É–±—Ä–∞—Ç—å –¥–≤–æ–π–Ω—ã–µ focusable —ç–ª–µ–º–µ–Ω—Ç—ã.

### ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

#### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SpatialEngine (`useSpatialNavigation.js`)
*   –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `document.body.contains(el)` –≤ –º–µ—Ç–æ–¥—ã `move()` –∏ `recoverFocus()` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ "–º—ë—Ä—Ç–≤—ã—Ö" —Å—Å—ã–ª–æ–∫ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–µ –∏–∑ DOM —ç–ª–µ–º–µ–Ω—Ç—ã.
*   –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –∑–æ–Ω—ã (`setActiveZone`) —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ stale references –∏–∑ –æ–±–µ–∏—Ö –∑–æ–Ω (—Å—Ç–∞—Ä–æ–π –∏ –Ω–æ–≤–æ–π).

#### 2. –£–ø—Ä–æ—â–µ–Ω–∏–µ SearchResultItem (`SearchPanel.jsx`)
*   –£–±—Ä–∞–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ ¬´‚ûï¬ª (–±—ã–ª–∞ –≤—Ç–æ—Ä—ã–º focusable —ç–ª–µ–º–µ–Ω—Ç–æ–º).
*   –¢–µ–ø–µ—Ä—å –≤—Å—è —Å—Ç—Ä–æ–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π focusable —ç–ª–µ–º–µ–Ω—Ç.
*   –ù–∞–∂–∞—Ç–∏–µ Enter/OK –Ω–∞ —Å—Ç—Ä–æ–∫–µ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ñ–∏–ª—å–º.
*   –ò–∫–æ–Ω–∫–∞ ‚ûï —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ (–ø—Ä–∏ —Ñ–æ–∫—É—Å–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–µ–ª—ë–Ω–æ–π).

#### 3. –£–ª—É—á—à–µ–Ω–∏–µ addFromSearch (`App.jsx`)
*   –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ–∏–ª—å–º–∞ —Ç–µ–ø–µ—Ä—å —Å–Ω–∞—á–∞–ª–∞ –æ—á–∏—â–∞—é—Ç—Å—è `searchResults` –∏ `searchProviders`, —á—Ç–æ–±—ã SearchResultItem –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –î–û –∑–∞–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏.
*   –£–±—Ä–∞–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–π cleanup –∏–∑ `SearchPanel` (–∑–æ–Ω–∞ —Ç–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ `App.jsx`).

### ‚ö†Ô∏è –ù–µ—Ä–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**BUG-FREEZE** –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º. –ó–∞–≤–∏—Å–∞–Ω–∏–µ —É–º–µ–Ω—å—à–∏–ª–æ—Å—å, –Ω–æ –Ω–µ –∏—Å—á–µ–∑–ª–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é. –¢—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑:
*   –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ –≤ polling `fetchStatus()` –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç Poster –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.
*   –í–æ–∑–º–æ–∂–Ω–æ, –∫–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É React re-render –∏ SpatialEngine registry.
*   –í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ MutationObserver –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è DOM-–∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

---

## üóìÔ∏è SESSION LOG: 26.01.2026 (Imported from v3.0.1)

### üéØ –¶–µ–ª–∏ —Å–µ—Å—Å–∏–∏
1. **Backend Fixes**: Kickstart download, Smart Deduplication, Search Providers Fix. (‚úÖ –í–´–ü–û–õ–ù–ï–ù–û)
2. **Frontend Navigation**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É "–º–µ—Ä—Ç–≤—ã—Ö –∑–æ–Ω" (Search / Magnet / Diagnostics) –¥–ª—è –ø—É–ª—å—Ç–∞. (‚ùå –ù–ï–£–î–ê–ß–ê ‚Üí –†–µ—à–µ–Ω–æ –ø–æ–∑–∂–µ)

### ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ (Backend)
–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∏–∫—Å—ã –±—ç–∫–µ–Ω–¥–∞ —É—Å–ø–µ—à–Ω–æ –≤–Ω–µ–¥—Ä–µ–Ω—ã:
*   `server/torrent.js`: –î–æ–±–∞–≤–ª–µ–Ω `mainFile.select()` (Kickstart) –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ magnet-—Ö–µ—à–∞ (Deduplication).
*   `server/providers`: –û—Ç–∫–ª—é—á–µ–Ω–∞ —Å–∞–º–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –±–µ–∑ Auth.
*   `server/aggregator.js`: –î–æ–±–∞–≤–ª–µ–Ω —Å–±—Ä–æ—Å Circuit Breaker —Ä–∞–∑ –≤ 5 –º–∏–Ω—É—Ç.

### üöß –ë–æ—Ä—å–±–∞ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π (–ê—Ä—Ö–∏–≤)
–ë—ã–ª–æ –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç–æ 5 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –æ–∂–∏–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ Top Bar –¥–ª—è –ø—É–ª—å—Ç–∞:
1. **Smart Focus** ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å `useEffect`.
2. **Passive Anchor** ‚Äî —Ñ–æ–∫—É—Å –ø–∞–¥–∞–ª –≤ `body`.
3. **Spatial Only** ‚Äî –∫–Ω–æ–ø–∫–∏ –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã (–≤–Ω–µ —Å–∫—Ä–æ–ª–ª-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞).
4. **Section Transitions** ‚Äî –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥.
5. **Master Toolbar** ‚Äî –±–µ–∑—É—Å–ø–µ—à–Ω–æ.

**–ò—Ç–æ–≥:** –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç React-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏ Spatial Graph. –†–µ—à–µ–Ω–∞ –ø–æ–∑–∂–µ —á–µ—Ä–µ–∑ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `useSpatialNavigation.js` (v3.3+).

### üìã Backlog ‚Äî –£–ª—É—á—à–µ–Ω–∏—è (2026-01-20)

| ID | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –î–µ—Ç–∞–ª–∏ |
|----|----------|-----------|--------|
| **FEAT-01** | **–†–∞—Å—à–∏—Ä–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ñ–∏–ª—å–º–æ–≤ (–∫–∞–∫ –≤ LAMPA)** | MEDIUM | –î–æ–±–∞–≤–∏—Ç—å: –ñ–∞–Ω—Ä—ã, –°—Ç—Ä–∞–Ω—ã, –ì–æ–¥—ã, –°–µ—Ç–∏ (Netflix, HBO), –ü–æ–¥–±–æ—Ä–∫–∏. |

---

## üîß –ß—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –∏ –∑–∞—á–µ–º (Code Review 2026-01-21)

> –†–µ–∑—É–ª—å—Ç–∞—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã: —Ä–∏—Å–∫ √ó –≤–ª–∏—è–Ω–∏–µ.

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

| ID | –ü—Ä–æ–±–ª–µ–º–∞ | –†–∏—Å–∫ | –†–µ—à–µ–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----|----------|------|---------|-----------|
| **SEC-01** | TMDB API Key –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º bundle (`VITE_TMDB_API_KEY`) | –ö–ª—é—á –º–æ–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –∏–∑ DevTools | –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ `/api/proxy`, –∫–ª—é—á —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ | HIGH |
| **BUG-04** | Modal Focus Loss –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö | –ù–∞ TV –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "—Ç–µ—Ä—è–µ—Ç—Å—è" | –ó–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å `activeElement` –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º | MUST |
| **BUG-11** | DiagnosticsPanel –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ —Å –ø—É–ª—å—Ç–∞ | –ù–µ–ª—å–∑—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ TV | –î–æ–±–∞–≤–∏—Ç—å Focus Trap –∫–∞–∫ –≤ `TorrentModal.jsx` | MEDIUM |

### üü° –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –¥–æ–ª–≥

| ID | –ü—Ä–æ–±–ª–µ–º–∞ | –ü–æ—á–µ–º—É –ø–ª–æ—Ö–æ | –†–µ—à–µ–Ω–∏–µ |
|----|----------|--------------|---------|
| **DEBT-01** | `server/index.js` ‚Äî 743 —Å—Ç—Ä–æ–∫–∏ | –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, merge-–∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã | –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è: `routes/`, `middleware/` |
| **DEBT-02** | `App.jsx` ‚Äî 867 —Å—Ç—Ä–æ–∫ | –õ–æ–≥–∏–∫–∞ –Ω–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | –í—ã–Ω–µ—Å—Ç–∏ –≤ hooks: `usePlayer`, `useTorrents` |

### üü¢ –£–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞

| ID | –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|----|----------|---------|-----------|
| **QUAL-01** | –ù–µ—Ç E2E —Ç–µ—Å—Ç–æ–≤ –¥–ª—è TV –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ | Playwright + —ç–º—É–ª—è—Ü–∏—è D-pad | Medium |
| **QUAL-02** | Polling —Å—Ç–∞—Ç—É—Å–∞ (5 —Å–µ–∫) –≤–º–µ—Å—Ç–æ push | WebSocket / SSE | Medium |
| **QUAL-03** | localStorage –±–µ–∑ –ª–∏–º–∏—Ç–∞ | IndexedDB + –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | Low |

### üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫

```
Sprint 1 (1-2 –¥–Ω—è):  BUG-04, BUG-11, SEC-01
Sprint 2 (3-5 –¥–Ω–µ–π): QUAL-01 (E2E —Ç–µ—Å—Ç—ã)
Sprint 3 (1 –Ω–µ–¥–µ–ª—è): DEBT-01, DEBT-02 (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥)
```

---

## üöÄ ROADMAP v4.0: Lampa Architecture Integration (Resurrection)
**Status:** üö¶ PLANNED
**Focus:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å —Å Lampa. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –≥–æ–¥–∞–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ TV-UX.

### üèõÔ∏è Phase 4: Core Lampa Patterns ‚Äî ‚úÖ COMPLETED
**Status:** ‚úÖ ALL SYSTEMS GO (2026-01-21)

#### üß© 4.1. Registry-Based Discovery (Home UI)
**Status:** ‚úÖ DONE
*   **ARC-03:** –°–æ–∑–¥–∞–Ω `ContentRowsRegistry`.
*   **ARC-04:** `HomePanel.jsx` —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω.
*   **FEAT-01:** –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (Lampa-style) –≤–Ω–µ–¥—Ä–µ–Ω—ã.

#### üéÆ 4.2. Global Spatial Controller (Navigation)
**Status:** ‚úÖ DONE
*   **NAV-01:** `NavigationContext` (useTVNavigation) –ø–µ—Ä–µ–ø–∏—Å–∞–Ω.
*   **NAV-03:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `MutationObserver` (—á–µ—Ä–µ–∑ —Ö—É–∫–∏).

#### üìú 4.3. Transform-Based Scrolling
**Status:** ‚úÖ DONE (Critical Performance Boost)
*   ‚úÖ **UX-10:** –í–Ω–µ–¥—Ä–µ–Ω –¥–≤–∏–∂–æ–∫ `transform: translateX()` –≤–º–µ—Å—Ç–æ `overflow: auto`.
*   ‚úÖ **UX-11:** "Focus Centering" (Apple TV style) ‚Äî –∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ—Å—Ç–µ—Ä –≤—Å–µ–≥–¥–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É.
*   ‚úÖ **BUG-10:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∑–∞–≤–∏—Å–∞–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–∞ (—É–±—Ä–∞–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏).

#### üåê 4.4. Deep Integration & New Features (v4.1 preview)
**Status:** ‚úÖ DONE
*   ‚úÖ **FEAT-02: Infinite Scroll.** –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ `CategoryPage.jsx` (IntersectionObserver).
*   ‚úÖ **FEAT-03: Season Selector.** `MovieDetail.jsx` —Ç–µ–ø–µ—Ä—å –≤—ã–≤–æ–¥–∏—Ç —Å–µ–∑–æ–Ω—ã —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø–æ–∏—Å–∫–æ–º.
*   ‚úÖ **PLAYER-01: Deep Integration.** `TVPlayer.java` + `App.jsx`. Two-way communication.
    *   Auto-Play Next Episode (–∞–≤—Ç–æ-–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ).
    *   Resume Position Saving (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞).
*   ‚úÖ **BUG-11: YouTube Freeze.** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ `@capacitor/browser`.

#### üåê 4.4. Unified Proxy Gateway
**–¶–µ–ª—å:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å API.
*   **API-01:** –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/proxy?url=...` (URL Encapsulation).
*   **API-02:** –ú–∏–≥—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ (Lampa Pattern).

---

### üõ†Ô∏è Technical Specifications (For AI Context)

#### 1. Memory Leak Fix (BUG-02) ‚Äî ‚úÖ ALREADY IMPLEMENTED
**Problem:** `setInterval` creates duplicates on hot-reload or restart logic.
**Current implementation in `server/torrent.js`:**
```javascript
let frozenCleanupIntervalId = null; // Line 32

function startFrozenCleanup() {
    if (frozenCleanupIntervalId) return; // Line 36 - PROTECTION EXISTS!
    frozenCleanupIntervalId = setInterval(() => { ... }, FROZEN_TTL);
}
---

## üó∫Ô∏è ROADMAP v3.1: Operation "Unstoppable" (Post-Mortem & Status)
**Version:** 3.1 (Legacy)
**Status:** üèÅ ARCHIVED (–ü–µ—Ä–µ—Ö–æ–¥ –∫ v3.2)
**Outcome:** –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏ –≤–Ω–µ–¥—Ä–µ–Ω—ã, –Ω–æ –∞—É–¥–∏—Ç –≤—ã—è–≤–∏–ª –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã –∏ "–º–µ—Ä—Ç–≤—ã–π –∫–æ–¥".

| ID | Task Name | Status | Notes |
|---|---|---|---|
| FIX-01a | 1D List Navigation | ‚úÖ DONE | –ë–∞–∑–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç. |
| FIX-01b | 2D Grid Navigation | ‚úÖ DONE | Grid —Ä–∞–±–æ—Ç–∞–µ—Ç. |
| FIX-01c | Modal Focus Trap | ‚úÖ DONE | **Audit 2025-01-20:** –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `TorrentModal.jsx`. `e.stopPropagation()` + `previouslyFocusedRef` —Ä–∞–±–æ—Ç–∞—é—Ç. |
| ARC-01 | Server DoH Rotation | ‚úÖ DONE | –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ. |
| ARC-02 | Client Waterfall | ‚úÖ DONE | **Audit 2025-01-20:** `resolveClientIP()` –∞–∫—Ç–∏–≤–µ–Ω –¥–ª—è APK. –ü—Ä–æ–±—Ä–æ—Å `Host` header —Ä–∞–±–æ—Ç–∞–µ—Ç. |
| UX-01 | Search Performance | ‚úÖ DONE | Debounce –≤–Ω–µ–¥—Ä–µ–Ω. |
| OPT-01 | List Virtualization | ‚õî FROZEN | **Audit 2025-01-20:** –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –¥–ª—è TV-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏. –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ Phase 3. |

---

## üìå DUPLICATE SECTION REMOVED
> *–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—ã–ª –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω. –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è v3.2 –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤—ã—à–µ (—Å—Ç—Ä–æ–∫–∏ 447+).*
> *–£–¥–∞–ª–µ–Ω–æ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞.*

---

## üîÆ ROADMAP v5.0: Future Development (2026+)
**Status:** üö¶ PLANNED
**Focus:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å, –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞.

> –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ code review –æ—Ç 2026-01-21.

---

### üì¶ Phase 5.1: Code Quality & DX (Developer Experience)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH | **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Medium

| ID | –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|--------|-----------|-----------|----------|
| **DX-01** | **TypeScript Migration** | HIGH | High | –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ TypeScript. –ù–∞—á–∞—Ç—å —Å `utils/` –∏ `providers/`. –î–æ–±–∞–≤–∏—Ç—å `.d.ts` —Ñ–∞–π–ª—ã –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞. |
| **DX-02** | **–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è App.jsx** | HIGH | Medium | –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –≤ custom hooks: `usePlayer`, `useSearch`, `useTorrents`, `useSettings`. –¶–µ–ª—å: < 300 —Å—Ç—Ä–æ–∫. |
| **DX-03** | **–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è server/index.js** | MEDIUM | Medium | –í—ã–¥–µ–ª–∏—Ç—å routes: `/routes/search.js`, `/routes/torrents.js`, `/routes/tmdb.js`. |
| **DX-04** | **ESLint + Prettier Config** | LOW | Low | –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –î–æ–±–∞–≤–∏—Ç—å pre-commit hooks (husky + lint-staged). |

---

### üì¶ Phase 5.2: Data Layer Modernization
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** MEDIUM | **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Medium

| ID | –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|--------|-----------|-----------|----------|
| **DATA-01** | **React Query / TanStack Query** | HIGH | Medium | –ó–∞–º–µ–Ω–∏—Ç—å —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –Ω–∞ React Query. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, retry, stale-while-revalidate. |
| **DATA-02** | **WebSocket –¥–ª—è Real-time** | MEDIUM | Medium | –ó–∞–º–µ–Ω–∏—Ç—å polling `/api/status` –Ω–∞ WebSocket. Instant updates –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤. |
| **DATA-03** | **IndexedDB –¥–ª—è Metadata** | LOW | Low | –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∫—ç—à –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage –≤ IndexedDB. –ë–æ–ª—å—à–µ –º–µ—Å—Ç–∞, async API. |

---

### üì¶ Phase 5.3: Testing & Reliability
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH | **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Medium

| ID | –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|--------|-----------|-----------|----------|
| **TEST-03** | **E2E Tests (Playwright)** | HIGH | Medium | –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è TV UX. –¢–µ—Å—Ç—ã: –Ω–∞–≤–∏–≥–∞—Ü–∏—è D-pad, Focus Trap, –ø–æ–∏—Å–∫, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ. |
| **TEST-04** | **Integration Tests (Providers)** | MEDIUM | Medium | –ú–æ–∫-—Å–µ—Ä–≤–µ—Ä –¥–ª—è Jacred/RuTracker. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é. |
| **TEST-05** | **Snapshot Tests (Components)** | LOW | Low | Vitest + @testing-library/react. –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π UI. |
| **TEST-06** | **Load Testing** | LOW | Medium | –¢–µ—Å—Ç –Ω–∞ 50+ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤. –í—ã—è–≤–∏—Ç—å memory leaks –∏ CPU bottlenecks. |

---

### üì¶ Phase 5.4: PWA & Offline
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** MEDIUM | **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** High

| ID | –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|--------|-----------|-----------|----------|
| **PWA-01** | **Service Worker** | MEDIUM | High | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏ –∏ API –æ—Ç–≤–µ—Ç–æ–≤. Workbox integration. |
| **PWA-02** | **Offline Catalog** | LOW | High | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å–º—ã/—Å–µ—Ä–∏–∞–ª—ã –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–µ—Ç–∏. |
| **PWA-03** | **Background Sync** | LOW | Medium | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ/history —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏. |

---

### üì¶ Phase 5.5: Advanced Features
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** LOW | **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** High

| ID | –ó–∞–¥–∞—á–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|--------|-----------|-----------|----------|
| **FEAT-10** | **User Profiles** | LOW | High | –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–∏–ª–µ–π —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π –ø—Ä–æ—Å–º–æ—Ç—Ä–∞. |
| **FEAT-11** | **Trakt.tv Integration** | LOW | Medium | Sync watch history —Å Trakt.tv. Scrobbling. |
| **FEAT-12** | **Subtitles Search** | MEDIUM | Medium | OpenSubtitles API. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –ø–æ IMDB ID. |
| **FEAT-13** | **Smart Recommendations** | LOW | High | ML-based recommendations –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞. |

---

### üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Q1 2026: DX-01 (TypeScript), DX-02 (App.jsx), TEST-03 (E2E) ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Q2 2026: DATA-01 (React Query), DATA-02 (WebSocket)         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Q3 2026: PWA-01 (Service Worker), FEAT-12 (Subtitles)       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Q4 2026: FEAT-11 (Trakt.tv), Polish & Stabilization         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```
## üöÄ ROADMAP v3.3: TMDB Rehab & TV Core (Active)
**Status:** üö¶ READY FOR DEV
**Focus:** Fix TV Navigation Graph, Rehabilitate TMDB as a Graph, Stabilize Android Player Lifecycle.

> **Context:**  
> The previous "Discovery" phase is paused. We are focusing on making the **Content Detail** experience (especially for Series) and **Player Experience** rock solid on TV.

### ÔøΩ Batch 1: TV Core & Navigation (The Series Card)
*Fixing the broken focus graph and navigation flow.*

| ID | Task Name | Priority | Complexity | Description |
|---|---|---|---|---|
| **TV-01** | **Series Card Focus Graph** | ‚úÖ DONE | High | **Fix D-Pad Trap.** Implement a strict focus graph: `Header <-> Seasons <-> Episodes <-> Actions`. Prevent focus loss when moving Up/Down between zones. |
| **TV-02** | **Focus Visuals Fix** | ‚úÖ DONE | Low | **Fix Clipped Rings.** Update CSS for Season cards to prevent focus outline clipping (`box-shadow` instead of outline, padding adjustments). |
| **UX-12** | **Season Detail View** | ‚úÖ DONE | Mid | **Logic Change.** Clicking a Season should NOT trigger Search. It must open a `Season Detail` view (list of episodes). Search triggers only on specific episode selection or "Play" button. |
| **UX-13** | **Smart Query Generation** | ‚úÖ DONE | Low | **S02 vs Season 2.** Normalize search queries. Use `Name S02` or `Name S02E03` format for better tracker matching. Remove "Season X" wordy format. |

### ÔøΩ Batch 2: Android Lifecycle (Intent Fixes)
*Stabilizing the external player launch experience.*

| ID | Task Name | Priority | Complexity | Description |
|---|---|---|---|---|
| **AND-01** | **Intent Lifecycle Fix** | ‚úÖ DONE | High | **Stop Double Chooser.** Prevent `chooser` from reappearing after playback. Add `FLAG_ACTIVITY_SINGLE_TOP` / `CLEAR_TOP`. Ensure `onResume` doesn't re-trigger intent. |
| **AND-02** | **Player Preference Verification** | SHOULD | Low | **Verify Persistence.** Ensure "Default Player" setting in `SettingsPanel` is actually respected by the `TVPlayer` plugin intent logic. |
| **AND-03** | **Double Player Launch Guard** | ‚úÖ PARTIAL | Mid | **Race Condition.** Prevent double launch of player due to multiple rapid clicks or rapid state updates. Temporary `isPlaying` guard implemented. Needs more robust lifecycle handling. |

### ÔøΩ Batch 3: TMDB Content Graph (Rehab)
*Turning TMDB from a static data source into a navigable graph.*

| ID | Task Name | Priority | Complexity | Description |
|---|---|---|---|---|
| **TMDB-01** | **Recommendations & Similar** | ‚úÖ DONE | Mid | **Linked Content.** Show "Similar Movies" row in `MovieDetail`. Clicking navigates to new Movie Card (Recursion supported). |
| **TMDB-02** | **Actor Filmography** | ‚úÖ DONE | High | **Person Graph.** Click on Actor -> Show `PersonDetail` (Bio + Filmography Grid). |
| **TMDB-03** | **Clickable Genres** | ‚úÖ DONE | Low | **Genre Discovery.** Click on Genre badge -> Go to Category View filtered by that genre. |
| **TMDB-04** | **Unified Graph Nav** | ‚úÖ DONE | High | **Architecture.** Ensure `Movie -> Actor -> Movie -> Genre -> Movie` flow works without breaking the Back Stack or Focus. |

### üìâ Backlog (De-prioritized)
* **Secondary Metadata Cache:** (SHOULD) Cache filmography/recommendations.
* **Episode Metadata:** (SHOULD) Fetch episode names/descriptions.
* **Discovery Home:** (POSTPONED) Focus on Detail View first.

---

### ‚úÖ Batch 2026-01-23: Discovery & UX Refinement
*   ‚úÖ **UX-14: Infinite Discovery.** –ü–∞–≥–∏–Ω–∞—Ü–∏—è –≤ `CategoryPage.jsx` —Å—Ç–∞–ª–∞ "–±–µ—Å—à–æ–≤–Ω–æ–π" (rootMargin: 500px).
*   ‚úÖ **UX-15: Main Page Load Opt.** –†—è–¥—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã 20 —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
*   ‚úÖ **UX-16: Stealth Background.** –£–±—Ä–∞–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π backdrop (—Ñ–∏–∫—Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å—Ç–µ—Ä–æ–≤).
*   ‚úÖ **UX-17: Season Poster Recovery.** –ö–∞—Å–∫–∞–¥–Ω—ã–π fallback –¥–ª—è —Å–µ–∑–æ–Ω–æ–≤ (Season -> Series -> Emoji).
### ‚úÖ Batch 2026-01-24: Critical Fixes & UI Polish (v2.9.9)
*   ‚úÖ **FIX-02: Mixed Content & Images** (v2.9.5+). –í–Ω–µ–¥—Ä–µ–Ω `wsrv.nl` + `ssl:` –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å—Ç–µ—Ä–æ–≤. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –Ω–∞ Android TV (APK).
*   ‚úÖ **FIX-03: Discovery Logic Sync** (v2.9.6). –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–ª—å—Å—ã `Poster.jsx` (AbortController, Error Handling).
*   ‚úÖ **UX-18: Sidebar UI Overhaul** (v2.9.9). –£–¥–∞–ª–µ–Ω–∞ —Å–∫—Ä—ã—Ç–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ç—Ä–µ–ª–∫–∞–º–∏.
    *   –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ **–ú–µ–Ω—é (‚ò∞)** –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω.
    *   –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ **–ó–∞–∫—Ä—ã—Ç—å (‚ùå)** –≤–Ω—É—Ç—Ä—å –º–µ–Ω—é.
*   ‚úÖ **UX-19: Sidebar Overlay** (v2.9.4). –°–∞–π–¥–±–∞—Ä —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–≤–µ—Ä–ª–µ–π –∏ –Ω–µ —Å–¥–≤–∏–≥–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç.
*   ‚úÖ **FIX-04: Critical Import Fix** (v2.9.7). –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏—è —Å –ø—É—Å—Ç—ã–º —ç–∫—Ä–∞–Ω–æ–º (discover.js).

### ‚úÖ Batch 2026-01-25: UI Polish & Search Rescue (Operation "Shield")
*   ‚úÖ **UX-20: Settings Redesign.** `SettingsPanel` –∏ `DiagnosticsPanel` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω—ã –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã `z-index` –∏ —Ñ–æ–∫—É—Å–∞.
*   ‚úÖ **FIX-05: Diagnostics Restoration.** –í–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (RAM, Uptime, Torrents) –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–∫—Å–∏ (Server/Capacitor/WSRV).
*   ‚úÖ **FIX-06: Search Provider Rescue.** –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ø–æ–∏—Å–∫–∞:
    *   **RuTracker:** –ü–µ—Ä–µ–≤–µ–¥–µ–Ω –Ω–∞ `smartFetch` (DoH + SNI). –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∫—É–∫–∏ —Å –æ–±—Ö–æ–¥–æ–º –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
    *   **Rutor:** –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π HTTPS (SNI Spoofing). –î–æ–±–∞–≤–ª–µ–Ω—ã `Accept`/`Cache-Control` –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –º–∏–º–∏–∫—Ä–∏–∏ –ø–æ–¥ –±—Ä–∞—É–∑–µ—Ä.
    *   **TorLook:** –í–Ω–µ–¥—Ä–µ–Ω `smartFetch` —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º —Ç–∞–π–º–∞—É—Ç–æ–º (45s).
    *   **Network Core:** –£–≤–µ–ª–∏—á–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã DoH Race (5s) –∏ Socket (30-45s) –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ –º–µ–¥–ª–µ–Ω–Ω—ã–µ VPN/DPI –∫–∞–Ω–∞–ª—ã.

üéØ –¶–µ–ª—å –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (Context & Intent)

–≠—Ç–æ—Ç –±–ª–æ–∫ –∑–∞–¥–∞—á –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–µ –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∏—á, –∞ –Ω–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏ –≤ –∫–ª–∏–µ–Ω—Ç–µ –∏ –¥–æ–≤–µ–¥–µ–Ω–∏–µ –µ–≥–æ –¥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è production-ready –¥–ª—è Android TV / PWA.

–ö–ª—é—á–µ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é –º—ã —Ä–µ—à–∞–µ–º

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ –æ–ø–∏—Ä–∞–ª–∞—Å—å –Ω–∞:

—ç–≤—Ä–∏—Å—Ç–∏–∫–∏ (—É–≥–∞–¥—ã–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é),

–Ω–µ—è–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (torrent.name ‚Üí metadata),

—Ä–∞–∑–º—ã—Ç—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ–∫—É—Å–æ–º).

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫:

–ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–º –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º (–æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è —Å–µ—Ä–∏–∞–ª–æ–≤ –∏ —Å–µ–∑–æ–Ω–æ–≤),

–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–π TV-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏,

—Ä–µ–≥—Ä–µ—Å—Å–∏—è–º –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö (TMDB / –ö–∏–Ω–æ–ø–æ–∏—Å–∫).

–¶–µ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç –∏–∑ —Ä–µ–∂–∏–º–∞ ‚Äú—É–≥–∞–¥—ã–≤–∞–Ω–∏—è‚Äù –≤ —Ä–µ–∂–∏–º —Å—Ç—Ä–æ–≥–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –≥–¥–µ:

–ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–∞

–ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –∑–Ω–∞–µ—Ç:

—Å–≤–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ (tmdb | kinopoisk)

—Å–≤–æ–π —Ç–∏–ø (movie | tv)

—Å–≤–æ–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (tmdbId, –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)

–ó–∞–ø—Ä–æ—Å—ã –∫ –≤–Ω–µ—à–Ω–∏–º API –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–∞–ª–∏–¥–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏.

–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–∏–∞–ª–æ–≤ –æ–±–æ–≥–∞—â–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–ü–æ—Å—Ç–µ—Ä—ã —Å–µ–∑–æ–Ω–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ª–µ–Ω–∏–≤–æ, —Ç–æ–ª—å–∫–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –¥–µ—Ç–∞–ª–µ–π.

–ù–µ—Ç –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ UI, –µ—Å—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ fallback‚Äô–∏.

TMDB –∏ –ö–∏–Ω–æ–ø–æ–∏—Å–∫ –∂—ë—Å—Ç–∫–æ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –∫–∞–∫ –¥–æ–º–µ–Ω—ã –¥–∞–Ω–Ω—ã—Ö.

–ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞ TV —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π

–í–≤–æ–¥–∏—Ç—Å—è –µ–¥–∏–Ω–∞—è –º–æ–¥–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (activeArea).

Sidebar –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –±—ã—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–º –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–º —É–∑–ª–æ–º.

–ü–æ–≤–µ–¥–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º (NUM / Lampa):

–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π Back,

–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ ‚Äú–ø—Ä—ã–∂–∫–æ–≤‚Äù —Ñ–æ–∫—É—Å–∞,

–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –æ–±–ª–∞—Å—Ç—è–º–∏ UI.

–ß–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å

‚ùå –ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ API –∏–ª–∏ backend-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.

‚ùå –ù–µ —É—Å–ª–æ–∂–Ω—è—Ç—å tmdbClient.js —Å–≤–µ—Ä—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–∞—Å–∫–∞–¥–∞.

‚ùå –ù–µ –≤–Ω–µ–¥—Ä—è—Ç—å –Ω–æ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏–ª–∏ state-–º–µ–Ω–µ–¥–∂–µ—Ä—ã.

‚ùå –ù–µ ‚Äú—á–∏–Ω–∏—Ç—å‚Äù UI –∑–∞ —Å—á—ë—Ç —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ –∫–æ—Å—Ç—ã–ª–µ–π.

–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–†–∞–±–æ—Ç–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π, –µ—Å–ª–∏:

–ö–ª–∏–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–ª–∏—á–∞–µ—Ç —Ñ–∏–ª—å–º—ã, —Å–µ—Ä–∏–∞–ª—ã –∏ —Å–µ–∑–æ–Ω—ã –±–µ–∑ —ç–≤—Ä–∏—Å—Ç–∏–∫.

–ü–æ—Å—Ç–µ—Ä—ã —Å–µ–∑–æ–Ω–æ–≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏ gracefully –¥–µ–≥—Ä–∞–¥–∏—Ä—É—é—Ç –ø—Ä–∏ –∏—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏.

Sidebar –∏ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –±–æ–ª—å—à–µ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç –∑–∞ —Ñ–æ–∫—É—Å.

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ TV –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ.

–í–∞–∂–Ω–æ:
–≠—Ç–æ—Ç –±–ª–æ–∫ ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è.
–õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –≤—ã—Ö–æ–¥—è—â–∏–µ –∑–∞ —ç—Ç–∏ —Ä–∞–º–∫–∏, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —è–≤–Ω–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã.

–§–∏–Ω–∞–ª—å–Ω—ã–π implementation checklist (Production Ready)
–≠–¢–ê–ü 1. –ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞

Data Layer. Blocker.

Poster.jsx
TMDB-–≤–µ—Ç–∫–∞

–í –º–µ—Å—Ç–µ, –≥–¥–µ –Ω–∞–π–¥–µ–Ω result –∏–∑ TMDB:

saveMetadata(cleanedName, {
  tmdbId: result.id,
  mediaType: result.media_type, // 'tv' | 'movie'
  source: 'tmdb',
  poster: directUrl,
  backdrop: backdropUrl,
  overview: result.overview || null,
  rating: result.vote_average || null,
  year: ...,
  title: ...
})

Kinopoisk-–≤–µ—Ç–∫–∞
saveMetadata(cleanedName, {
  tmdbId: null,
  mediaType: kpData?.type === 'TV_SERIES' ? 'tv' : 'movie',
  source: 'kinopoisk',
  poster: kpUrl,
  backdrop: null,
  overview: ...,
  rating: ...,
  year: ...,
  title: ...
})


–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç:

tmdbId !== null —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ source === 'tmdb'

–Ω–∏–∫–∞–∫–∏—Ö ¬´—É–≥–∞–¥—ã–≤–∞–Ω–∏–π¬ª –¥–∞–ª—å—à–µ –ø–æ –∫–æ–¥—É

–≠–¢–ê–ü 2. –ü–æ—Å—Ç–µ—Ä—ã —Å–µ–∑–æ–Ω–æ–≤
**Status:** ‚úÖ COMPLETED (v2.9.9)

Enrichment Layer. Lazy. Detail-only.

TorrentModal.jsx
2.1 –ß—Ç–µ–Ω–∏–µ metadata —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç race condition
let meta = getMetadata(cleanTitle(torrent.name))

if (!meta?.tmdbId) {
  try {
    meta = JSON.parse(
      localStorage.getItem(`metadata_v1_${cleanTitle(torrent.name)}`)
    )
  } catch {}
}

setMetadata(meta)


–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å. –ë–µ–∑ –Ω–µ–≥–æ –±—É–¥—É—Ç ¬´–ø—Ä–∏–∑—Ä–∞–∫–∏¬ª.

2.2 Lazy-–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ–∑–æ–Ω–æ–≤
useEffect(() => {
  if (
    !metadata?.tmdbId ||
    metadata?.mediaType !== 'tv' ||
    metadata?.source !== 'tmdb'
  ) return

  const cached = getSeasons(metadata.tmdbId)
  if (cached) return

  getDetails(metadata.tmdbId, 'tv').then(data => {
    if (data?.seasons?.length) {
      saveSeasons(metadata.tmdbId, data.seasons)
    }
  })
}, [metadata?.tmdbId])


–ù–∏–∫–∞–∫–∏—Ö –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç.
–ù–∏–∫–∞–∫–∏—Ö –ø–æ–≤—Ç–æ—Ä–æ–≤.
–ù–∏–∫–∞–∫–∏—Ö fetch‚Äô–µ–π ¬´–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π¬ª.

2.3 –†–µ–Ω–¥–µ—Ä –ø–æ—Å—Ç–µ—Ä–æ–≤ —Å–µ–∑–æ–Ω–æ–≤
const posterUrl = season.poster_path
  ? getImageUrl(season.poster_path, 'w342')
  : metadata.poster


UI –ø—Ä–∞–≤–∏–ª–æ:

–Ω–µ—Ç –ø–æ—Å—Ç–µ—Ä–∞ ‚Üí fallback

–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∂–¥–∞—Ç—å

–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–Ω–¥–µ—Ä

–≠–¢–ê–ü 3. Sidebar / NUM-–º–æ–¥–µ–ª—å

Navigation Layer. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –≤–ª–∞—Å—Ç–∏.

3.1 Sidebar.jsx ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —É–ø—Ä–æ—â–µ–Ω–∏–µ

–£–¥–∞–ª–∏—Ç—å:

useTVNavigation

–æ–±—Ä–∞–±–æ—Ç–∫—É –∫–ª–∞–≤–∏—à

–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ useEffect –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

–û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ:

props:
- items
- focusedIndex
- isExpanded
- onSelect(index)


CSS:

isExpanded ? w-64 : w-20

–Ω–∏–∫–∞–∫–∏—Ö side-effect‚Äô–æ–≤

Sidebar —Ç–µ–ø–µ—Ä—å —Ç—É–ø–æ–π. –ò –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.

3.2 HomePanel.jsx ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
const [activeArea, setActiveArea] = useState('content')
// 'sidebar' | 'content' | 'overlay'

handleKeyDown (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–º—ã—Å–ª)
if (activeArea === 'sidebar') {
  // Up / Down ‚Üí focusedIndex
  // Right ‚Üí setActiveArea('content')
  // Back ‚Üí collapse or exit
  return
}

if (activeArea === 'content') {
  // Grid navigation
  // Left –Ω–∞ –∫—Ä–∞–π–Ω–µ–º —ç–ª–µ–º–µ–Ω—Ç–µ ‚Üí setActiveArea('sidebar')
  return
}

if (activeArea === 'overlay') {
  return // –º–æ–¥–∞–ª–∫–∏ —Å–∞–º–∏
}

NUM-–ø–æ–≤–µ–¥–µ–Ω–∏–µ (–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ)

Sidebar –º–æ–∂–µ—Ç –±—ã—Ç—å collapsed, –Ω–æ –≤–∏–¥–∏–º

–ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ —Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è, –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω sidebar

Back:

sidebar expanded ‚Üí sidebar collapsed

sidebar collapsed ‚Üí content

–§–æ–∫—É—Å –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∞–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç, –Ω–µ –≤ –Ω–∞—á–∞–ª–æ