# PWA-TorServe MVP

–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –¥–æ–º–∞—à–Ω–∏–π –º–µ–¥–∏–∞-—Å–µ—Ä–≤–µ—Ä –¥–ª—è TV-Box (Ugoos).
–°—Ç–µ–∫: Node.js (Express), React (Vite), WebTorrent, LowDB.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–õ–æ–∫–∞–ª—å–Ω–æ / TV-Box)

1.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
    ```bash
    npm install
    ```

2.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env`. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç—å `DOWNLOAD_PATH` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∑–∞–ø–∏—Å–∏.
    ```env
    PORT=3000
    DOWNLOAD_PATH=/mnt/synology/cache
    ```

3.  **–°–±–æ—Ä–∫–∞ Frontend:**
    ```bash
    npm run client:build
    ```

4.  **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:**
    ```bash
    npm start
    ```
    –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:3000`

## üì± PWA –∏ Vercel (–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ APK)

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è PWA-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ [PWABuilder](https://www.pwabuilder.com/).

### –î–µ–ø–ª–æ–π Frontend –Ω–∞ Vercel
–¢–∞–∫ –∫–∞–∫ Vercel –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (—Ç–æ—Ä—Ä–µ–Ω—Ç-–∫–ª–∏–µ–Ω—Ç), –º—ã –¥–µ–ø–ª–æ–∏–º —Ç—É–¥–∞ **—Ç–æ–ª—å–∫–æ Frontend** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è HTTPS —Å—Å—ã–ª–∫–∏, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–∏–º–µ—Ç PWABuilder.

1.  –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Vercel.
2.  –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ —É–∫–∞–∂–∏—Ç–µ:
    *   **Framework Preset**: Vite
    *   **Root Directory**: `client` (–ù–∞–∂–º–∏—Ç–µ Edit —Ä—è–¥–æ–º —Å Root Directory)
3.  –ù–∞–∂–º–∏—Ç–µ **Deploy**.

### –°–æ–∑–¥–∞–Ω–∏–µ APK
1.  –í–æ–∑—å–º–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://pwa-torserve.vercel.app`).
2.  –í—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –Ω–∞ —Å–∞–π—Ç–µ [PWABuilder](https://www.pwabuilder.com/).
3.  –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∏ —Å–∫–∞—á–∞–π—Ç–µ APK.

### ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ
PWA, –∑–∞–ø—É—â–µ–Ω–Ω–æ–µ —Å Vercel (HTTPS), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —Å–º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –≤–∞—à–µ–º—É –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É (HTTP) –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤ (Mixed Content).
*   **–î–ª—è —Ç–µ—Å—Ç–æ–≤**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ TV-Box –∏ –∑–∞—Ö–æ–¥–∏—Ç–µ –ø—Ä—è–º–æ –Ω–∞ `http://localhost:3000`.
*   **–î–ª—è APK**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ APK –Ω–∞ TV-Box. –ï—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–æ–¥–µ `client/src/App.jsx` –ø—Ä–æ–ø–∏—Å–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫.

## üõ† API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

*   `GET /api/status` - –°—Ç–∞—Ç—É—Å —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤ (—Å–∫–æ—Ä–æ—Å—Ç—å, –ø—Ä–æ–≥—Ä–µ—Å—Å).
*   `POST /api/add` - –î–æ–±–∞–≤–∏—Ç—å —Ç–æ—Ä—Ä–µ–Ω—Ç (body: `{ "magnet": "..." }`).
*   `GET /stream/:infoHash/:fileIndex` - –°—Ç—Ä–∏–º–∏–Ω–≥ —Ñ–∞–π–ª–∞ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Range requests).

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ APK –Ω–∞ TV-Box

1.  **–ü–µ—Ä–µ–Ω–æ—Å —Ñ–∞–π–ª–∞**:
    *   –°–∫–∞—á–∞–π—Ç–µ APK —Ñ–∞–π–ª, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤ PWABuilder.
    *   –ó–∞–ø–∏—à–∏—Ç–µ –µ–≥–æ –Ω–∞ USB-—Ñ–ª–µ—à–∫—É –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –≤ –æ–±–ª–∞–∫–æ (Google Drive, –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫), –¥–æ—Å—Ç—É–ø–Ω–æ–µ –Ω–∞ TV-Box.

2.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**:
    *   –í—Å—Ç–∞–≤—å—Ç–µ —Ñ–ª–µ—à–∫—É –≤ TV-Box (–∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –æ–±–ª–∞–∫–æ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä).
    *   –ù–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª `.apk` –∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ.
    *   –ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–∑ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ ‚Äî **–†–∞–∑—Ä–µ—à–∏—Ç–µ** (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ -> –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å -> –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏).
    *   –ù–∞–∂–º–∏—Ç–µ **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å**.

3.  **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∞**:
    *   –û—Ç–∫—Ä–æ–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **TorServe**.
    *   **–í–∞–∂–Ω–æ**: –¢–∞–∫ –∫–∞–∫ APK –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å Vercel (HTTPS), –∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ (HTTP), –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –Ω–µ —É–≤–∏–¥–µ—Ç—å —Å–µ—Ä–≤–µ—Ä —Å—Ä–∞–∑—É.
    *   **–†–µ—à–µ–Ω–∏–µ**:
        *   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ TV-Box (`npm start`).
        *   –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è, —Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä –Ω–∞ TV-Box (Chrome, Firefox) –∏ –ø–µ—Ä–µ–π—Ç–∏ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:3000`. –ë—Ä–∞—É–∑–µ—Ä –ø—Ä–µ–¥–ª–æ–∂–∏—Ç "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" (–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω), —á—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ PWA, –Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞–ø—Ä—è–º—É—é —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å HTTPS/HTTP.
